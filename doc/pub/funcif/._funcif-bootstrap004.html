<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Functions and branching">
<meta name="keywords" content="function header,function body,body of a function,call a function,invoke a function,Online Python Tutor,keyword arguments,function arguments keyword,positional arguments,function arguments positional,named arguments,function arguments named,doc strings,main program,lambda functions,lambda functions,test function,nose tests,pytest tests,mod function,Online Python Tutor,Trapezoidal rule for integration,Midpoint rule for integration,Fourier series,Heaviside function,sort (list)">

<title>Functions and branching</title>

<!-- Bootstrap style: bootstrap_bluegray -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_bootstrap/css/bootstrap_bluegray.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }
</style>


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Functions ', 1, None, '___sec0'),
              (' Mathematical functions as Python functions ',
               2,
               'sec:basic:func1',
               'sec:basic:func1'),
              (' Understanding the program flow ',
               2,
               'sec:basic:pot',
               'sec:basic:pot'),
              (' Local and global variables ',
               2,
               'sec:basic:localglobal',
               'sec:basic:localglobal'),
              (' Local variables are invisible outside functions ',
               3,
               None,
               '___sec4'),
              (' Local variables hide global variables ', 3, None, '___sec5'),
              (' Example ', 3, None, '___sec6'),
              (' Changing global variables inside functions ',
               3,
               None,
               '___sec7'),
              (' Multiple arguments ',
               2,
               'sec:basic:multiple:args',
               'sec:basic:multiple:args'),
              (' Function argument or global variable? ',
               2,
               'sec:basic:arg:or:global',
               'sec:basic:arg:or:global'),
              (' Beyond mathematical functions ',
               2,
               'sec:basic:makelist',
               'sec:basic:makelist'),
              (' Remark 1 ', 3, None, '___sec11'),
              (' Remark 2 ', 3, None, '___sec12'),
              (' Multiple return values ',
               2,
               'sec:basic:multiple:returns',
               'sec:basic:multiple:returns'),
              (' Computing sums ', 2, 'sec:basic:sum', 'sec:basic:sum'),
              (' Functions with no return values ',
               2,
               'sec:basic:None',
               'sec:basic:None'),
              (' Keyword arguments ',
               2,
               'sec:basic:kwargs',
               'sec:basic:kwargs'),
              (' Example: Function with default parameters ',
               3,
               None,
               '___sec17'),
              (' Example: Computing a sum with default tolerance ',
               3,
               None,
               '___sec18'),
              (' Doc strings ',
               2,
               'sec:basic:docstring',
               'sec:basic:docstring'),
              (' Functions as arguments to functions ',
               2,
               'sec:basic:farg',
               'sec:basic:farg'),
              (' The behavior of the numerical derivative as $h\\rightarrow 0$ ',
               3,
               None,
               '___sec21'),
              (' The main program ', 2, None, '___sec22'),
              (' Lambda functions ',
               2,
               'sec:basic:lambdafunc',
               'sec:basic:lambdafunc'),
              (' Branching ', 1, 'sec:input:if', 'sec:input:if'),
              (' If-else blocks ', 2, None, '___sec25'),
              (' Inline if tests ', 2, None, '___sec26'),
              (' Summary ', 1, 'sec:funcif:summary', 'sec:funcif:summary'),
              (' Chapter topics ', 2, None, '___sec28'),
              (' User-defined functions ', 3, None, '___sec29'),
              (' Keyword arguments ', 3, None, '___sec30'),
              (' If tests ', 3, None, '___sec31'),
              (' Inline if tests ', 3, None, '___sec32'),
              (' Terminology ', 3, None, '___sec33'),
              (' Example: Numerical integration ',
               2,
               'sec:funcif:summary:ex',
               'sec:funcif:summary:ex'),
              (' Problem ', 3, None, '___sec35'),
              (' Solution ', 3, None, '___sec36'),
              (' Verification ', 3, None, '___sec37'),
              (' Checking the validity of function arguments ',
               3,
               None,
               '___sec38'),
              (' Exercises ', 1, None, '___sec39'),
              (' Exercise 1: Write a Fahrenheit-Celsius conversion function ',
               2,
               'sec:basic:ex26b',
               'sec:basic:ex26b'),
              (' Exercise 2: Evaluate a sum and write a test function ',
               2,
               'sec:basic:ex29d',
               'sec:basic:ex29d'),
              (' Exercise 3: Write a function for solving $ax^2 + bx + c =0$ ',
               2,
               'sec:funcif:ex1',
               'sec:funcif:ex1'),
              (' Exercise 4: Implement the sum function ',
               2,
               'sec:input:ex1',
               'sec:input:ex1'),
              (' Exercise 5: Compute a polynomial via a product ',
               2,
               'sec:basic:ex32',
               'sec:basic:ex32'),
              (' Exercise 6: Integrate a function by the Trapezoidal rule ',
               2,
               'sec:basic:ex38',
               'sec:basic:ex38'),
              (' Remarks ', 3, None, '___sec46'),
              (' Exercise 7: Derive the general Midpoint integration rule ',
               2,
               'sec:basic:ex39c',
               'sec:basic:ex39c'),
              (' Exercise 8: Make an adaptive Trapezoidal rule ',
               2,
               'sec:basic:ex39d',
               'sec:basic:ex39d'),
              (' Remarks ', 3, None, '___sec49'),
              (' Exercise 9: Explain why a program works ',
               2,
               'sec:basic:ex48',
               'sec:basic:ex48'),
              (' Exercise 10: Simulate a program by hand ',
               2,
               'sec:basic:ex:locglob',
               'sec:basic:ex:locglob'),
              (' Exercise 11: Compute the area of an arbitrary triangle ',
               2,
               'sec:basic:ex25',
               'sec:basic:ex25'),
              (' Exercise 12: Compute the length of a path ',
               2,
               'sec:basic:ex25b',
               'sec:basic:ex25b'),
              (' Exercise 13: Approximate $\\pi$ ',
               2,
               'sec:basic:ex25c',
               'sec:basic:ex25c'),
              (' Exercise 14: Write functions ',
               2,
               'sec:basic:ex42a',
               'sec:basic:ex42a'),
              (' Exercise 15: Approximate a function by a sum of sines ',
               2,
               'sec:formula:ex10',
               'sec:formula:ex10'),
              (' Remarks ', 3, None, '___sec57'),
              (' Exercise 16: Implement a Gaussian function ',
               2,
               'sec:basic:ex33',
               'sec:basic:ex33'),
              (' Exercise 17: Write a function for numerical differentiation ',
               2,
               'sec:basic:ex38a',
               'sec:basic:ex38a'),
              (' Exercise 18: Implement the factorial function ',
               2,
               'sec:basic:ex35',
               'sec:basic:ex35'),
              (' Exercise 19: Compute velocity and acceleration from 1D position data ',
               2,
               'sec:basic:ex29q',
               'sec:basic:ex29q'),
              (' Exercise 20: Find the max and min values of a function ',
               2,
               'sec:basic:ex29g',
               'sec:basic:ex29g'),
              (' Exercise 21: Find the max and min elements in a list ',
               2,
               'sec:basic:ex29g2',
               'sec:basic:ex29g2'),
              (' Exercise 22: Implement the Heaviside function ',
               2,
               'sec:basic:exH1',
               'sec:basic:exH1'),
              (' Exercise 23: Implement a smoothed Heaviside function ',
               2,
               'sec:basic:exH2',
               'sec:basic:exH2'),
              (' Exercise 24: Implement an indicator function ',
               2,
               'sec:basic:exH3',
               'sec:basic:exH3'),
              (' Exercise 25: Implement a piecewise constant function ',
               2,
               'sec:basic:exH4',
               'sec:basic:exH4'),
              (' Exercise 26: Apply indicator functions ',
               2,
               'sec:basic:exH4b',
               'sec:basic:exH4b'),
              (' Exercise 27: Test your understanding of branching ',
               2,
               'sec:basic:ex49',
               'sec:basic:ex49'),
              (' Exercise 28: Simulate nested loops by hand ',
               2,
               'sec:basic:ex40',
               'sec:basic:ex40'),
              (' Exercise 29: Rewrite a mathematical function ',
               2,
               'sec:basic:ex29f',
               'sec:basic:ex29f'),
              (' Exercise 30: Make a table for approximations of $\\cos x$ ',
               2,
               'sec:basic:ex29e',
               'sec:basic:ex29e'),
              (' Exercise 31: Use None in keyword arguments ',
               2,
               'sec:basic:ex31b',
               'sec:basic:ex31b'),
              (' Exercise 32: Write a sort function for a list of 4-tuples ',
               2,
               'sec:basic:ex28',
               'sec:basic:ex28'),
              (' Exercise 33: Find prime numbers ',
               2,
               'sec:basic:ex37',
               'sec:basic:ex37'),
              (' Exercise 34: Resolve a problem with a function ',
               2,
               'sec:input:ex35',
               'sec:input:ex35'),
              (' Exercise 35: Determine the types of some objects ',
               2,
               'sec:basic:ex20',
               'sec:basic:ex20'),
              (' Remarks ', 3, None, '___sec78'),
              (' Exercise 36: Find an error in a program ',
               2,
               'sec:basic:ex34',
               'sec:basic:ex34'),
              (' References ', 1, None, '___sec80')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="funcif-bootstrap.html">Functions and branching</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._funcif-bootstrap001.html#___sec0" style="font-size: 80%;">Functions</a></li>
     <!-- navigation toc: --> <li><a href="._funcif-bootstrap002.html#sec:input:if" style="font-size: 80%;">Branching</a></li>
     <!-- navigation toc: --> <li><a href="._funcif-bootstrap003.html#sec:funcif:summary" style="font-size: 80%;">Summary</a></li>
     <!-- navigation toc: --> <li><a href="#___sec39" style="font-size: 80%;">Exercises</a></li>
     <!-- navigation toc: --> <li><a href="#___sec80" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0004"></a>
<!-- !split -->
<p style="font-size:80%">This chapter is taken from book <a href="http://www.springer.com/gp/book/9783642549588">A Primer on Scientific Programming with Python</a> by H. P. Langtangen, 4th edition, Springer, 2014.</p>

<h1 id="___sec39">Exercises </h1>

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex26b">Exercise 1: Write a Fahrenheit-Celsius conversion function</h2>

<p>
The formula for converting Fahrenheit degrees to Celsius reads

$$
\begin{equation} C = \frac{5}{9}(F - 32)\tp
\tag{5}
\end{equation}
$$

Write a function <code>C(F)</code> that implements this formula.
To verify the implementation, you can use <code>F(C)</code> from
the section <a href="._funcif-bootstrap001.html#sec:basic:func1">Mathematical functions as Python functions</a> and test that <code>C(F(c)</code> equals <code>c</code>.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_1_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_1_1">

<p>
Do not test <code>C(F(c)) == c</code> exactly, but use a tolerance for
the difference.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>f2c.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29d">Exercise 2: Evaluate a sum and write a test function</h2>

<p>
<b>a)</b>
Write a Python function <code>sum_1k(M)</code> that returns the sum
\( s = \sum_{k=1}^M {1\over k} \).

<p>
<b>b)</b>
Compute \( s \) for \( M=3 \) by hand and write another function
<code>test_sum_1k()</code> that calls <code>sum_1k(3)</code> and checks that the
answer is correct.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_2_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_2_1">

<p>
We recommend that <code>test_sum_1k</code> follows the conventions of the pytest and nose
testing
frameworks.
It means setting a boolean variable <code>success</code> to <code>True</code> if the test
passes, otherwise <code>False</code>. The next step is to do <code>assert success</code>,
which will abort the program with an error message if <code>success</code> is
<code>False</code> and the test failed. To provide an informative error message,
you can add your own message string <code>msg</code>: <code>assert success, msg</code>.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
Filename: <code>sum_func.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:funcif:ex1">Exercise 3: Write a function for solving \( ax^2 + bx + c =0 \)</h2>

<p>
<b>a)</b>
Given a quadratic equation \( ax^2 + bx + c =0 \), write a function
<code>roots(a, b, c)</code> that returns the two roots of the equation.
The returned roots should be <code>float</code> objects when the roots are real,
otherwise the function returns <code>complex</code> objects.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_3_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_3_1">

<p>
You may use <code>sqrt</code> from the <code>numpy.lib.scimath</code>
library.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<b>b)</b>
Construct two test cases with known solutions, one with real roots and
the other with complex roots. Implement the two test cases in two
test functions <code>test_roots_float</code> and <code>test_roots_complex</code>, where you
call the <code>roots</code> function and check the type and value of the
returned objects.

<p>
Filename: <code>roots_quadratic.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:input:ex1">Exercise 4: Implement the sum function</h2>

<p>
The standard Python function called <code>sum</code> takes a list as argument
and computes the sum of the elements in the list:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000">sum</span>([<span style="color: #666666">1</span>,<span style="color: #666666">3</span>,<span style="color: #666666">5</span>,<span style="color: #666666">-5</span>])
<span style="color: #666666">4</span>
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000">sum</span>([[<span style="color: #666666">1</span>,<span style="color: #666666">2</span>], [<span style="color: #666666">4</span>,<span style="color: #666666">3</span>], [<span style="color: #666666">8</span>,<span style="color: #666666">1</span>]])
[<span style="color: #666666">1</span>, <span style="color: #666666">2</span>, <span style="color: #666666">4</span>, <span style="color: #666666">3</span>, <span style="color: #666666">8</span>, <span style="color: #666666">1</span>]
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000">sum</span>([<span style="color: #BA2121">&#39;Hello, &#39;</span>, <span style="color: #BA2121">&#39;World!&#39;</span>])
<span style="color: #BA2121">&#39;Hello, World!&#39;</span>
</pre></div>
<p>
Implement your own version of <code>sum</code>.
Filename: <code>mysum.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex32">Exercise 5: Compute a polynomial via a product</h2>

<p>
Given \( n+1 \) roots \( r_0,r_1,\ldots,r_{n} \) of a polynomial \( p(x) \) of degree
\( n+1 \), \( p(x) \) can be computed by

$$
\begin{equation}
p(x) = \prod_{i=0}^{n}(x-r_i) = (x-r_0)(x-r_1)\cdots (x-r_{n-1})(x-r_{n})
\tag{6}
\tp
\end{equation}
$$

Write a function <code>poly(x, roots)</code> that takes \( x \) and a list <code>roots</code>
of the roots as arguments and returns \( p(x) \).
Construct a test case for verifying the implementation.
Filename: <code>polyprod.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</h2>

<p>
<b>a)</b>
An approximation to the integral of a function \( f(x) \) over an interval
\( [a,b] \) can be found by first approximating \( f(x) \) by the straight line
that goes through the end points \( (a,f(a)) \) and \( (b,f(b)) \), and then
finding the area under the straight line, which is the area of a
trapezoid.  The resulting formula becomes

$$
\begin{equation} \int_a^b f(x)dx \approx {b-a\over 2}(f(a) + f(b))\tp
\tag{7}
\end{equation}
$$

Write a function <code>trapezint1(f, a, b)</code> that returns this approximation
to the integral. The argument <code>f</code> is a Python implementation <code>f(x)</code> of
the mathematical function \( f(x) \).

<p>
<b>b)</b>
Use the approximation <a href="#mjx-eqn-7">(7)</a> to
compute the following integrals:
\( \int_0^\pi \cos x\, dx \),
\( \int_0^\pi \sin x\, dx \), and \( \int_0^{\pi/2} \sin x\, dx \),
In each case, write out the error, i.e., the difference between
the exact integral and the approximation <a href="#mjx-eqn-7">(7)</a>.
Make rough sketches of the trapezoid for each integral
in order to understand how the method behaves in the different cases.

<p>
<b>c)</b>
We can easily improve the formula <a href="#mjx-eqn-7">(7)</a> by
approximating the area under the function \( f(x) \) by two equal-sized
trapezoids.  Derive a formula for this approximation and implement it
in a function <code>trapezint2(f, a, b)</code>.  Run the examples from b)
and see how much better the new formula is. Make sketches of the two
trapezoids in each case.

<p>
<b>d)</b>
A further improvement of the approximate integration method from
c) is to divide the area under the
\( f(x) \) curve into \( n \) equal-sized trapezoids. Based on this idea,
derive the following formula for approximating the integral:

$$
\begin{equation}
\int_a^b f(x) dx \approx \sum_{i=1}^{n-1} \frac{1}{2}h\left(f(x_{i})+f(x_{i+1})
\right),
\tag{8}
\end{equation}
$$

where \( h \) is the width of the trapezoids, \( h = (b-a)/n \), and \( x_i=a +
ih \), \( i=0,\ldots,n \), are the coordinates of the sides of the
trapezoids.  The figure below visualizes the idea of the Trapezoidal
rule.

<p>
<center><p><img src="fig-funcif/viz_trapez.png" align="bottom" width=500></p></center>

<p>
Implement <a href="#mjx-eqn-8">(8)</a> in a Python function
<code>trapezint(f, a, b, n)</code>. Run the examples from b) with \( n=10 \).

<p>
<b>e)</b>
Write a test function <code>test_trapezint()</code> for verifying the
implementation of the function <code>trapezint</code> in d).

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_6_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_6_1">

<p>
Obviously, the Trapezoidal method integrates linear functions exactly
for any \( n \). Another more surprising result is that the method is also
exact for, e.g., \( \int_0^{2\pi} \cos x\, dx \) for any \( n \).

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
Filename: <code>trapezint.py</code>.

<p>
<!-- Closing remarks for this Exercise -->

<h3 id="___sec46">Remarks </h3>

<p>
Formula <a href="#mjx-eqn-8">(8)</a> is not the most common way of
expressing the Trapezoidal integration rule.  The reason is that
\( f(x_{i+1}) \) is evaluated twice, first in term \( i \) and then as
\( f(x_{i}) \) in term \( i+1 \). The formula can be further developed to
avoid unnecessary evaluations of \( f(x_{i+1}) \), which results in the
standard form

$$
\begin{equation}
\int_a^b f(x)dx\approx \frac{1}{2}h(f(a)+ f(b)) + h\sum_{i=1}^{n-1}
f(x_i)\tp
\end{equation}
$$

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex39c">Exercise 7: Derive the general Midpoint integration rule</h2>

<p>
The idea of the Midpoint rule for integration is to divide the area
under the curve \( f(x) \) into \( n \) equal-sized rectangles (instead of
trapezoids as in <a href="#sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</a>).
The height of the rectangle is determined by the value of \( f \) at
the midpoint of the rectangle.
The figure below illustrates the idea.

<p>
<center><p><img src="fig-funcif/viz_midpoint.png" align="bottom" width=500></p></center>

<p>
Compute the area of each rectangle, sum them up, and arrive at the
formula for the Midpoint rule:

$$
\begin{equation}
\int_a^b f(x)dx \approx h\sum_{i=0}^{n-1} f(a + ih + \frac{1}{2}h),
\end{equation}
$$

where \( h=(b-a)/n \) is the width of each rectangle. Implement this formula
in a Python function <code>midpointint(f, a, b, n)</code> and test
the function on the examples listed in <a href="#sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</a>b.
How do the errors in the Midpoint rule compare with those of
the Trapezoidal rule for \( n=1 \) and \( n=10 \)?
Filename: <code>midpointint.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex39d">Exercise 8: Make an adaptive Trapezoidal rule</h2>

<p>
A problem with the Trapezoidal integration rule
<a href="#mjx-eqn-8">(8)</a> in <a href="#sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</a> is to
decide how many trapezoids (\( n \)) to use in order to achieve a desired
accuracy. Let \( E \) be the error in the Trapezoidal method, i.e., the
difference between the exact integral and that produced by
<a href="#mjx-eqn-8">(8)</a>. We would like to prescribe a (small)
tolerance \( \epsilon \) and find an \( n \) such that \( E\leq\epsilon \).

<p>
Since the exact value \( \int_a^bf(x)dx \) is not available (that is why
we use a numerical method!), it is challenging to compute \( E \).
Nevertheless, it has been shown by mathematicians that

$$
\begin{equation}
E \leq \frac{1}{12}(b-a)h^2\max_{x\in [a,b]}\left\vert f''(x)\right\vert\tp
\tag{9}
\end{equation}
$$

The maximum of \( |f''(x)| \) can be computed (approximately) by evaluating
\( f''(x) \) at a large number of points in \( [a,b] \), taking the
absolute value \( |f''(x)| \), and finding the maximum value of these.
The double derivative can be computed by a finite difference formula:

$$ f''(x)\approx \frac{f(x+h) - 2f(x) + f(x-h)}{h^2}\tp$$

<!-- You can use the <code>diff2nd</code> function from the section <a href="._funcif-bootstrap001.html#sec:basic:farg">Functions as arguments to functions</a> -->
<!-- to compute \( f''(x) \). -->

<p>
With the computed estimate of \( \max |f''(x)| \) we can find \( h \) from
setting the right-hand side in <a href="#mjx-eqn-9">(9)</a> equal
to the desired tolerance:

$$
\begin{equation*} \frac{1}{12}(b-a)h^2\max_{x\in [a,b]}\left\vert f''(x)\right\vert
= \epsilon\tp
\end{equation*}
$$

Solving with respect to \( h \) gives

$$
\begin{equation}
h =  \sqrt{12\epsilon}\left(
(b-a)\max_{x\in [a,b]}\left\vert f''(x)\right\vert\right)^{-1/2}\tp
\end{equation}
$$

With \( n=(b-a)/h \) we have the \( n \) that corresponds to the desired
accuracy \( \epsilon \).

<p>
<b>a)</b>
Make a Python function <code>adaptive_trapezint(f, a, b, eps=1E-5)</code>
for computing the integral \( \int_a^b f(x)dx \) with an error
less than or equal to \( \epsilon \) (<code>eps</code>).

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_8_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_8_1">

<p>
Compute the \( n \) corresponding to \( \epsilon \) as explained above and
call <code>trapezint(f, a, b, n)</code> from <a href="#sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</a>.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<b>b)</b>
Apply the function to compute the integrals from
<a href="#sec:basic:ex38">Exercise 6: Integrate a function by the Trapezoidal rule</a>b.
Write out the exact error and the estimated \( n \) for each case.

<p>
Filename: <code>adaptive_trapezint.py</code>.

<p>
<!-- Closing remarks for this Exercise -->

<h3 id="___sec49">Remarks </h3>

<p>
A numerical method that applies an expression for the error to
adapt the choice of the discretization parameter to a desired
error tolerance, is known as an <em>adaptive</em> numerical method.
The advantage of an adaptive method is that one can control
the approximation error, and there is no need for the user
to determine an appropriate number of intervals \( n \).

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex48">Exercise 9: Explain why a program works</h2>

<p>
Explain how and thereby why the following program works:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add</span>(A, B):
    C <span style="color: #666666">=</span> A <span style="color: #666666">+</span> B
    <span style="color: #008000; font-weight: bold">return</span> C

A <span style="color: #666666">=</span> <span style="color: #666666">3</span>
B <span style="color: #666666">=</span> <span style="color: #666666">2</span>
<span style="color: #008000; font-weight: bold">print</span> add(A, B)
</pre></div>
<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex:locglob">Exercise 10: Simulate a program by hand</h2>

<p>
Simulate the following program by hand to explain what is printed.

<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+a%28x%29%3A%0A++++q+%3D+2%0A++++x+%3D+3%2Ax%0A++++return+q+%2B+x%0A%0Adef+b%28x%29%3A%0A++++global+q%0A++++q+%2B%3D+x%0A++++return+q+%2B+x%0A%0Aq+%3D+0%0Ax+%3D+3%0Aprint+a%28x%29%2C+b%28x%29%2C+a%28x%29%2C+b%28x%29&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_10_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_10_1">

<p>
If you encounter problems with understanding function calls and local versus
global variables, paste the code into the
<a href="http://www.pythontutor.com/visualize.html" target="_self">Online Python Tutor</a> and
step through the code to get a good explanation of what happens.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex25">Exercise 11: Compute the area of an arbitrary triangle</h2>

<p>
An arbitrary triangle can be described by the coordinates of its
three vertices: \( (x_1,y_1) \), \( (x_2,y_2) \), \( (x_3, y_3) \), numbered in
a counterclockwise direction.
The area of the triangle is given by the formula

$$
\begin{equation}
A=\frac{1}{2}\left\vert x_2y_3 - x_3y_2 - x_1y_3 + x_3y_1 + x_1y_2 - x_2y_1\right\vert
\tp
\tag{10}
\end{equation}
$$

Write a function <code>area(vertices)</code> that returns the area of a triangle
whose vertices are specified by the argument <code>vertices</code>, which is
a nested list of the vertex coordinates. For example, computing the area
of the triangle with vertex coordinates \( (0,0) \), \( (1,0) \), and \( (0,2) \)
is done by

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">triangle1 <span style="color: #666666">=</span> area([[<span style="color: #666666">0</span>,<span style="color: #666666">0</span>], [<span style="color: #666666">1</span>,<span style="color: #666666">0</span>], [<span style="color: #666666">0</span>,<span style="color: #666666">2</span>]])
<span style="color: #408080; font-style: italic"># or</span>
v1 <span style="color: #666666">=</span> (<span style="color: #666666">0</span>,<span style="color: #666666">0</span>);  v2 <span style="color: #666666">=</span> (<span style="color: #666666">1</span>,<span style="color: #666666">0</span>);  v3 <span style="color: #666666">=</span> (<span style="color: #666666">0</span>,<span style="color: #666666">2</span>)
vertices <span style="color: #666666">=</span> [v1, v2, v3]
triangle1 <span style="color: #666666">=</span> area(vertices)

<span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Area of triangle is </span><span style="color: #BB6688; font-weight: bold">%.2f</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> triangle1
</pre></div>
<p>
Test the <code>area</code> function on a triangle with known area.
Filename: <code>area_triangle.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex25b">Exercise 12: Compute the length of a path</h2>

<p>
Some object is moving along a path in the plane. At \( n+1 \) points of time
we have recorded the corresponding \( (x,y) \) positions of the object:
\( (x_0,y_0) \), \( (x_1,y_2) \), \( \ldots \), \( (x_{n},y_{n}) \).
The total length \( L \) of the path from \( (x_0,y_0) \) to \( (x_{n},y_{n}) \)
is the sum of all the individual line segments (\( (x_{i-1},y_{i-1}) \)
to \( (x_{i},y_{i}) \), \( i=1,\ldots,n \)):

$$
\begin{equation}
L = \sum_{i=1}^{n} \sqrt{ (x_i-x_{i-1})^2 + (y_i - y_{i-1})^2}\tp
\end{equation}
$$

<p>
<b>a)</b>
Make a Python function <code>pathlength(x, y)</code> for computing \( L \) according to
the formula. The arguments <code>x</code> and <code>y</code> hold all the
\( x_0,\ldots,x_{n} \) and \( y_0,\ldots,y_{n} \) coordinates, respectively.

<p>
<b>b)</b>
Write a test function <code>test_pathlength()</code> where you check that
<code>pathlength</code> returns the correct length in a test problem.

<p>
Filename: <code>pathlength.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex25c">Exercise 13: Approximate \( \pi \)</h2>

<p>
The value of \( \pi \) equals the circumference of a circle with radius \( 1/2 \).
Suppose we approximate the circumference by a polygon through \( n+1 \)
points on the circle. The length of this polygon can be found
using the <code>pathlength</code> function from
<a href="#sec:basic:ex25b">Exercise 12: Compute the length of a path</a>.
Compute \( n+1 \) points \( (x_i,y_i) \) along a circle with radius \( 1/2 \)
according to the formulas

$$
\begin{equation*}
x_i=\frac{1}{2}\cos (2\pi i /n),\quad
y_i=\frac{1}{2}\sin (2\pi i/n), \quad
i=0,\ldots,n\tp
\end{equation*}
$$

Call the <code>pathlength</code> function and write out the error in the
approximation of \( \pi \) for \( n=2^k \), \( k=2,3,\ldots,10 \).
Filename: <code>pi_approx.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex42a">Exercise 14: Write functions</h2>

<p>
Three functions, <code>hw1</code>, <code>hw2</code>, and <code>hw3</code>, work as follows:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> hw1()
Hello, World!
<span style="color: #666666">&gt;&gt;&gt;</span> hw2()
Hello, World!
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> hw3(<span style="color: #BA2121">&#39;Hello, &#39;</span>, <span style="color: #BA2121">&#39;World!&#39;</span>)
Hello, World!
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> hw3(<span style="color: #BA2121">&#39;Python &#39;</span>, <span style="color: #BA2121">&#39;function&#39;</span>)
Python function
</pre></div>
<p>
Write the three functions.
Filename: <code>hw_func.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:formula:ex10">Exercise 15: Approximate a function by a sum of sines</h2>

<p>
We consider the piecewise constant function

$$
\begin{equation}
\tag{11}
f(t) = \left\lbrace\begin{array}{ll}
1, & 0 < t < T/2,\\ 
0, & t = T/2,\\ 
-1, & T/2 < t < T
\end{array}\right.
\end{equation}
$$

Sketch this function on a piece of paper. One can approximate \( f(t) \)
by the sum

$$
\begin{equation}
S(t;n) = {4\over\pi}\sum_{i=1}^n {1\over 2i-1}
\sin\left( {2(2i-1)\pi t\over T}\right)\tp
\tag{12}
\end{equation}
$$

It can be shown that \( S(t;n)\rightarrow f(t) \) as \( n\rightarrow\infty \).

<p>
<b>a)</b>
Write a Python function <code>S(t, n, T)</code> for returning the value of \( S(t;n) \).

<p>
<b>b)</b>
Write a Python function <code>f(t, T)</code> for computing \( f(t) \).

<p>
<b>c)</b>
Write out tabular information showing how the error \( f(t) - S(t;n) \)
varies with \( n \) and \( t \) for the cases where
\( n=1,3,5,10,30,100 \) and \( t=\alpha T \), with \( T=2\pi \), and
\( \alpha =0.01, 0.25, 0.49 \). Use the table to comment on how the quality
of the approximation depends on \( \alpha \) and \( n \).

<p>
Filename: <code>sinesum1.py</code>.

<p>
<!-- Closing remarks for this Exercise -->

<h3 id="___sec57">Remarks </h3>

<p>
A sum of sine and/or cosine functions,
as in <a href="#mjx-eqn-12">(12)</a>, is called a <em>Fourier series</em>.
Approximating a function by a Fourier
series is a very important technique in science and technology.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex33">Exercise 16: Implement a Gaussian function</h2>

<p>
Make a Python function <code>gauss(x, m=0, s=1)</code> for computing
the Gaussian function

$$
\begin{equation*}
f(x) =
{1\over\sqrt{2\pi }\, s}
\exp{\left[-\frac{1}{2}\left({x-m\over s}\right)^2\right]}\tp
\end{equation*}
$$

Write out a nicely formatted table of \( x \) and \( f(x) \) values for \( n \)
uniformly spaced \( x \) values in \( [m-5s, m+5s] \). (Choose \( m \), \( s \), and
\( n \) as you like.)
Filename: <code>gaussian2.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex38a">Exercise 17: Write a function for numerical differentiation</h2>

<p>
The formula

$$
\begin{equation} f'(x)\approx {f(x+h)-f(x-h)\over 2h} \tag{13}\end{equation}
$$

can be used to find an approximate derivative of a mathematical
function \( f(x) \) if \( h \) is small.

<p>
<b>a)</b>
Write a function <code>diff(f, x, h=1E-5)</code> that returns the approximation
<a href="#mjx-eqn-13">(13)</a>
of the derivative of a mathematical function represented by a Python
function <code>f(x)</code>.

<p>
<b>b)</b>
Write a function <code>test_diff()</code> that verifies the implementation
of the function <code>diff</code>. As test case, one can use the fact that
<a href="#mjx-eqn-13">(13)</a> is exact for quadratic functions.
Follow the conventions of the pytest and nose testing
frameworks.

<p>
<b>c)</b>
Apply <a href="#mjx-eqn-13">(13)</a> to differentiate

<ul>
 <li> \( f(x)=e^x \) at \( x=0 \),</li>
 <li> \( f(x)=e^{-2x^2} \) at \( x=0 \),</li>
 <li> \( f(x)=\cos x \) at \( x=2\pi \),</li>
 <li> \( f(x)=\ln x \) at \( x=1 \).</li>
</ul>

Use \( h=0.01 \). In each case, write out the error,
i.e., the difference between the exact derivative and the result of
<a href="#mjx-eqn-13">(13)</a>. Collect these four examples in a function
<code>application()</code>.

<p>
Filename: <code>centered_diff.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex35">Exercise 18: Implement the factorial function</h2>

<p>
The factorial of \( n \) is written as \( n! \) and defined as

$$
\begin{equation}
n! = n(n-1)(n-2)\cdots 2\cdot 1,
\end{equation}
$$

with the special cases

$$
\begin{equation}
1! = 1,\quad 0! = 1\tp
\end{equation}
$$

For example, \( 4! = 4\cdot 3\cdot 2\cdot 1 = 24 \), and \( 2! = 2\cdot 1 = 2 \).
Write a Python function <code>fact(n)</code> that returns \( n! \).
(Do not simply call the ready-made function
<code>math.factorial(n)</code> - that is considered cheating in this context!)

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_18_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_18_1">

<p>
Return 1 immediately if \( x \) is 1 or 0, otherwise use a loop to compute \( n! \).

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>fact.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29q">Exercise 19: Compute velocity and acceleration from 1D position data</h2>

<p>
Suppose we have recorded GPS coordinates \( x_0,\ldots,x_n \) at times
\( t_0,\ldots,t_n \) while running or driving along a straight road.  We
want to compute the velocity \( v_i \) and acceleration \( a_i \) from these
position coordinates. Using finite difference approximations, one
can establish the formulas

$$
\begin{align}
v_i &\approx \frac{x_{i+1}-x_{i-1}}{t_{i+1}-t_{i-1})},\\ 
a_i &\approx
2(t_{i+1}-t_{i-1})^{-1}\left(\frac{x_{i+1}-x_{i}}{t_{i+1}-t_i} -
\frac{x_{i}-x_{i-1}}{t_{i}-t_{i-1}}\right),
\end{align}
$$

for \( i=1,\ldots,n-1 \).

<p>
<b>a)</b>
Write a Python function <code>kinematics(x, i, dt=1E-6)</code> for computing \( v_i \)
and \( a_i \), given the array <code>x</code> of position coordinates
\( x_0,\ldots,x_n \).

<p>
<b>b)</b>
Write a Python function <code>test_kinematics()</code> for testing the
implementation in the case of constant velocity \( V \).
Set \( t_0=0 \), \( t_1=0.5 \), \( t_2=1.5 \), and \( t_3=2.2 \),
and \( x_i = Vt_i \).

<p>
Filename: <code>kinematics1.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29g">Exercise 20: Find the max and min values of a function</h2>

<p>
The maximum and minimum values of a mathematical function \( f(x) \)
on \( [a,b] \) can be found by computing \( f \) at a large number (\( n \)) of
points and selecting the maximum and minimum values at these points.
Write a Python function <code>maxmin(f, a, b, n=1000)</code> that returns
the maximum and minimum value of a function <code>f(x)</code>. Also write a
test function for verifying the implementation for
\( f(x) = \cos x \), \( x\in [-\pi/2, 2\pi] \).

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_20_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_20_1">

<p>
The \( x \) points where the mathematical function is to be evaluated
can be uniformly distributed: \( x_i = a + ih \), \( i=0,\ldots,n-1 \),
\( h = (b-a)/(n-1) \).  The Python functions <code>max(y)</code> and <code>min(y)</code>
return the maximum and minimum values in the list <code>y</code>, respectively.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>maxmin_f.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29g2">Exercise 21: Find the max and min elements in a list</h2>

<p>
Given a list <code>a</code>, the <code>max</code> function in Python's standard
library computes the largest element in <code>a</code>: <code>max(a)</code>.
Similarly, <code>min(a)</code> returns the smallest element in <code>a</code>.
Write your own <code>max</code> and <code>min</code> functions.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_21_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_21_1">

<p>
Initialize a variable <code>max_elem</code>
by the first element in the list, then visit all the remaining elements
(<code>a[1:]</code>), compare each element to <code>max_elem</code>, and if
greater, set <code>max_elem</code> equal to that element.
Use a similar technique to compute the minimum element.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>maxmin_list.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:exH1">Exercise 22: Implement the Heaviside function</h2>

<p>
The following <em>step function</em> is known as the
<em>Heaviside function</em> and is
widely used in mathematics:

$$
\begin{equation}
H(x) = \left\lbrace\begin{array}{ll}
0, & x < 0\\ 
1, & x\geq 0
\end{array}\right.
\tag{14}
\end{equation}
$$

<p>
<b>a)</b>
Implement \( H(x) \) in a Python function <code>H(x)</code>.

<p>
<b>b)</b>
Make a Python function <code>test_H()</code> for testing the implementation of <code>H(x)</code>.
Compute \( H(-10) \), \( H(-10^{-15}) \), \( H(0) \), \( H(10^{-15}) \),
\( H(10) \) and test that the answers are correct.

<p>
Filename: <code>Heaviside.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:exH2">Exercise 23: Implement a smoothed Heaviside function</h2>

<p>
The Heaviside function <a href="#mjx-eqn-14">(14)</a> listed in
<a href="#sec:basic:exH1">Exercise 22: Implement the Heaviside function</a> is discontinuous. It is in many
numerical applications advantageous to work with a smooth version of
the Heaviside function where the function itself and its first
derivative are continuous. One such smoothed Heaviside function
is

$$
\begin{equation}
H_{\epsilon}(x) = \left\lbrace
\begin{array}{ll}
0, &  x < -\epsilon,\\ 
\frac{1}{2} + {x\over 2\epsilon} + {1\over 2\pi}\sin\left(\pi x\over\epsilon\right), & -\epsilon \leq x \leq \epsilon\\ 
1, & x > \epsilon
\end{array}\right.
\tag{15}
\end{equation}
$$

<p>
<b>a)</b>
Implement \( H_{\epsilon}(x) \) in a Python function <code>H_eps(x, eps=0.01)</code>.

<p>
<b>b)</b>
Make a Python function <code>test_H_eps()</code> for testing the implementation
of <code>H_eps</code>. Check the values of some \( x < -\epsilon \), \( x=-\epsilon \),
\( x=0 \), \( x=\epsilon \), and some \( x>\epsilon \).

<p>
Filename: <code>smoothed_Heaviside.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:exH3">Exercise 24: Implement an indicator function</h2>

<p>
In many applications there is need for an indicator function, which is
1 over some interval and 0 elsewhere. More precisely, we define

$$
\begin{equation}
I(x;L,R) = \left\lbrace\begin{array}{ll}
1, & x\in [L,R],\\ 
0, & \hbox{elsewhere}
\end{array}\right.
\end{equation}
$$

<p>
<b>a)</b>
Make two Python implementations of such an indicator function,
one with a direct test if \( x\in [L,R] \) and one that expresses
the indicator function in terms of Heaviside functions
<a href="#mjx-eqn-14">(14)</a>:

$$
\begin{equation} I(x;L,R) = H(x-L)H(R-x)
\tag{16}
\tp
\end{equation}
$$

<p>
<b>b)</b>
Make a test function for verifying the implementation of the
functions in a). Check that correct values are returned for
some \( x < L \), \( x=L \), \( x=(L+R)/2 \), \( x=R \), and some \( x>R \).

<p>
Filename: <code>indicator_func.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:exH4">Exercise 25: Implement a piecewise constant function</h2>

<p>
Piecewise constant functions have a lot of important applications
when modeling physical phenomena by mathematics. A piecewise
constant function can be defined as

$$
\begin{equation}
f(x) = \left\lbrace\begin{array}{ll}
v_0, & x\in [x_0, x_1),\\ 
v_1, & x\in [x_1, x_2),\\ 
\vdots &\\ 
v_i & x\in [x_i, x_{i+1}),\\ 
\vdots &\\ 
v_n & x\in [x_n, x_{n+1}]
\end{array}\right.
\tag{17}
\end{equation}
$$

That is, we have a union of non-overlapping intervals covering the
domain \( [x_0,x_{n+1}] \), and \( f(x) \) is constant in each interval.
One example is the function that is -1 on \( [0,1] \), 0 on \( [1,1.5] \),
and 4 on \( [1.5,2] \), where we with the notation in
<a href="#mjx-eqn-17">(17)</a> have \( x_0=0, x_1=1, x_2=1.5, x_3=2 \)
and \( v_0=-1, v_1=0, v_3=4 \).

<p>
<b>a)</b>
Make a Python function <code>piecewise(x, data)</code> for evaluating a piecewise
constant mathematical function as in <a href="#mjx-eqn-17">(17)</a>
at the point <code>x</code>. The <code>data</code> object is a list of pairs \( (v_i,x_i) \) for
\( i=0,\ldots,n \). For example, <code>data</code> is <code>[(0, -1), (1, 0), (1.5, 4)]</code>
in the example listed above. Since \( x_{n+1} \) is not a part of the
<code>data</code> object, we have no means for detecting whether <code>x</code> is to the
right of the last interval \( [x_n, x_{n+1}] \), i.e., we must assume that
the user of the <code>piecewise</code> function sends in an \( x\leq x_{n+1} \).

<p>
<b>b)</b>
Design suitable test cases for the function <code>piecewise</code> and
implement them in a test function <code>test_piecewise()</code>.

<p>
Filename: <code>piecewise_constant1.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:exH4b">Exercise 26: Apply indicator functions</h2>

<p>
Implement
piecewise constant functions, as defined in <a href="#sec:basic:exH4">Exercise 25: Implement a piecewise constant function</a>,
by observing that

$$
\begin{equation}
f(x) = \sum_{i=0}^n v_i I(x; x_{i}, x_{i+1}),
\end{equation}
$$

where \( I(x; x_{i}, x_{i+1}) \) is the indicator function
from <a href="#sec:basic:exH3">Exercise 24: Implement an indicator function</a>.
Filename: <code>piecewise_constant2.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex49">Exercise 27: Test your understanding of branching</h2>

<p>
Consider the following code:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">where1</span>(x, y):
    <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
        <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;quadrant I or IV&#39;</span>
    <span style="color: #008000; font-weight: bold">if</span> y <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
        <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;quadrant I or II&#39;</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">where2</span>(x, y):
    <span style="color: #008000; font-weight: bold">if</span> x <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
        <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;quadrant I or IV&#39;</span>
    <span style="color: #008000; font-weight: bold">elif</span> y <span style="color: #666666">&gt;</span> <span style="color: #666666">0</span>:
        <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;quadrant II&#39;</span>

<span style="color: #008000; font-weight: bold">for</span> x, y <span style="color: #AA22FF; font-weight: bold">in</span> (<span style="color: #666666">-1</span>, <span style="color: #666666">1</span>), (<span style="color: #666666">1</span>, <span style="color: #666666">1</span>):
    where1(x,y)
    where2(x,y)
</pre></div>
<p>
What is printed?

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex40">Exercise 28: Simulate nested loops by hand</h2>

<p>
Go through the code below by hand, statement by statement, and calculate the
numbers that will be printed.

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">n <span style="color: #666666">=</span> <span style="color: #666666">3</span>
<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">-1</span>, n):
    <span style="color: #008000; font-weight: bold">if</span> i <span style="color: #666666">!=</span> <span style="color: #666666">0</span>:
        <span style="color: #008000; font-weight: bold">print</span> i

<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">1</span>, <span style="color: #666666">13</span>, <span style="color: #666666">2*</span>n):
    <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(n):
        <span style="color: #008000; font-weight: bold">print</span> i, j

<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">1</span>, n<span style="color: #666666">+1</span>):
    <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(i):
        <span style="color: #008000; font-weight: bold">if</span> j:
            <span style="color: #008000; font-weight: bold">print</span> i, j

<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">1</span>, <span style="color: #666666">13</span>, <span style="color: #666666">2*</span>n):
    <span style="color: #008000; font-weight: bold">for</span> j <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">0</span>, i, <span style="color: #666666">2</span>):
        <span style="color: #008000; font-weight: bold">for</span> k <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">2</span>, j, <span style="color: #666666">1</span>):
            b <span style="color: #666666">=</span> i <span style="color: #666666">&gt;</span> j <span style="color: #666666">&gt;</span> k
            <span style="color: #008000; font-weight: bold">if</span> b:
                <span style="color: #008000; font-weight: bold">print</span> i, j, k
</pre></div>
<p>
You may use a debugger,
or the <a href="http://www.pythontutor.com/" target="_self">Online Python Tutor</a>,
see the section <a href="._funcif-bootstrap001.html#sec:basic:pot">Understanding the program flow</a>,
to control what happens when you step through the code.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29f">Exercise 29: Rewrite a mathematical function</h2>

<p>
We consider the \( L(x;n) \) sum as defined in the section <a href="._funcif-bootstrap001.html#sec:basic:sum">Computing sums</a>
and the corresponding function <code>L3(x, epsilon)</code> function from the section <a href="._funcif-bootstrap001.html#sec:basic:kwargs">Keyword arguments</a>.  The sum \( L(x;n) \) can be written as

$$
\begin{equation*} L(x;n) = \sum_{i=1}^n c_i, \quad c_i = {1\over i}\left( {x\over 1+x}\right)^{i}\tp\end{equation*}
$$

<p>
<b>a)</b>
Derive a relation between \( c_{i} \) and \( c_{i-1} \),

$$
\begin{equation*} c_{i} = ac_{i-1},\end{equation*}
$$

where \( a \) is an expression involving \( i \) and \( x \).

<p>
<b>b)</b>
The relation \( c_{i}=ac_{i-1} \)
means that we can start with <code>term</code> as \( c_1 \), and then
in each pass  of the loop implementing the sum \( \sum_i c_i \) we
can compute the next term \( c_i \) in the sum as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">term <span style="color: #666666">=</span> a<span style="color: #666666">*</span>term
</pre></div>
<p>
Write a new version of the <code>L3</code> function, called <code>L3_ci(x, epsilon)</code>,
that makes use of this alternative computation of the terms in the sum.

<p>
<b>c)</b>
Write a Python function <code>test_L3_ci()</code> that verifies the implementation
of <code>L3_ci</code> by comparing with the original <code>L3</code> function.

<p>
Filename: <code>L3_recursive.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex29e">Exercise 30: Make a table for approximations of \( \cos x \)</h2>

<p>
The function \( \cos (x) \) can be approximated by the sum

$$
\begin{equation}
C(x;n) = \sum_{j=0}^n c_j,
\end{equation}
$$

where

$$
\begin{equation*} c_j = -c_{j-1}{x^2\over 2j(2j-1)},\quad j=1,2,\ldots, n,\end{equation*}
$$

and \( c_0=1 \).

<p>
<b>a)</b>
Make a Python function for computing \( C(x;n) \).

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_30_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_30_1">

<p>
Represent \( c_j \) by a variable <code>term</code>, make updates <code>term = -term*...</code>
inside a <code>for</code> loop, and accumulate the <code>term</code> variable in a variable
for the sum.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<b>b)</b>
Make a function for writing out a table of the errors in
the approximation
\( C(x;n) \) of \( \cos (x) \) for some \( x \) and \( n \) values given as
arguments to the function. Let the \( x \) values run downward in the
rows and the \( n \) values to the right in the columns.
For example, a table for \( x=4\pi,6\pi,8\pi,10\pi \) and \( n=5, 25, 50, 100, 200 \)
can look like

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">     x          5         25         50        100        200
   12.5664   1.61e+04   1.87e-11   1.74e-12   1.74e-12   1.74e-12
   18.8496   1.22e+06   2.28e-02   7.12e-11   7.12e-11   7.12e-11
   25.1327   2.41e+07   6.58e+04  -4.87e-07  -4.87e-07  -4.87e-07
   31.4159   2.36e+08   6.52e+09   1.65e-04   1.65e-04   1.65e-04
</pre></div>
</blockquote><p>
Observe how the error increases with \( x \) and decreases with \( n \).

<p>
Filename: <code>cos_sum.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex31b">Exercise 31: Use None in keyword arguments</h2>

<p>
Consider the functions <code>L2(x, n)</code> and <code>L3(x, epsilon)</code> from the sections <a href="._funcif-bootstrap001.html#sec:basic:sum">Computing sums</a> and
<a href="._funcif-bootstrap001.html#sec:basic:kwargs">Keyword arguments</a>, whose program code is found in the file
<a href="http://tinyurl.com/pwyasaa/funcif/lnsum.py" target="_self"><tt>lnsum.py</tt></a>.

<p>
Make a more flexible function <code>L4</code> where we can either specify a
tolerance <code>epsilon</code> <em>or</em> a number of terms <code>n</code> in the sum. Moreover,
we can also choose whether we want the sum to be returned or the sum
and the number of terms:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">value, n <span style="color: #666666">=</span> L4(x, epsilon<span style="color: #666666">=1E-8</span>, return_n<span style="color: #666666">=</span><span style="color: #008000">True</span>)
value <span style="color: #666666">=</span> L4(x, n<span style="color: #666666">=100</span>)
</pre></div>
<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_31_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_31_1">

<p>
The starting point for all this flexibility is to have some keyword
arguments initialized to an &quot;undefined&quot; value, called <code>None</code>, which can be
recognized inside the function:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">L3</span>(x, n<span style="color: #666666">=</span><span style="color: #008000">None</span>, epsilon<span style="color: #666666">=</span><span style="color: #008000">None</span>, return_n<span style="color: #666666">=</span><span style="color: #008000">False</span>):
    <span style="color: #008000; font-weight: bold">if</span> n <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
        <span style="color: #666666">...</span>
    <span style="color: #008000; font-weight: bold">if</span> epsilon <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
        <span style="color: #666666">...</span>
</pre></div>
<p>
One can also apply <code>if n != None</code>, but the <code>is</code> operator is most common.

<p>
Print error messages for incompatible values when <code>n</code> <em>and</em>
<code>epsilon</code> are <code>None</code> or both are given by the user.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>L4.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex28">Exercise 32: Write a sort function for a list of 4-tuples</h2>

<p>
<!-- <a href="http://www.astrosociety.org/education/publications/tnl/05/05.html" target="_self"><tt>http://www.astrosociety.org/education/publications/tnl/05/05.html</tt></a> -->
Below is a list of the nearest stars and some of their properties.
The list elements are 4-tuples containing the name of the
star, the distance from the
sun in light years, the apparent brightness, and the luminosity.
The apparent brightness is how bright the stars look in our sky compared
to the brightness of Sirius A. The luminosity, or the true brightness,
is how bright the stars would look if all were at the same distance
compared to the Sun.
The list data are found in the file <a href="http://tinyurl.com/pwyasaa/funcif/stars.txt" target="_self"><tt>stars.txt</tt></a>, which looks as follows:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">data <span style="color: #666666">=</span> [
(<span style="color: #BA2121">&#39;Alpha Centauri A&#39;</span>,    <span style="color: #666666">4.3</span>,  <span style="color: #666666">0.26</span>,      <span style="color: #666666">1.56</span>),
(<span style="color: #BA2121">&#39;Alpha Centauri B&#39;</span>,    <span style="color: #666666">4.3</span>,  <span style="color: #666666">0.077</span>,     <span style="color: #666666">0.45</span>),
(<span style="color: #BA2121">&#39;Alpha Centauri C&#39;</span>,    <span style="color: #666666">4.2</span>,  <span style="color: #666666">0.00001</span>,   <span style="color: #666666">0.00006</span>),
(<span style="color: #BA2121">&quot;Barnard&#39;s Star&quot;</span>,      <span style="color: #666666">6.0</span>,  <span style="color: #666666">0.00004</span>,   <span style="color: #666666">0.0005</span>),
(<span style="color: #BA2121">&#39;Wolf 359&#39;</span>,            <span style="color: #666666">7.7</span>,  <span style="color: #666666">0.000001</span>,  <span style="color: #666666">0.00002</span>),
(<span style="color: #BA2121">&#39;BD +36 degrees 2147&#39;</span>, <span style="color: #666666">8.2</span>,  <span style="color: #666666">0.0003</span>,    <span style="color: #666666">0.006</span>),
(<span style="color: #BA2121">&#39;Luyten 726-8 A&#39;</span>,      <span style="color: #666666">8.4</span>,  <span style="color: #666666">0.000003</span>,  <span style="color: #666666">0.00006</span>),
(<span style="color: #BA2121">&#39;Luyten 726-8 B&#39;</span>,      <span style="color: #666666">8.4</span>,  <span style="color: #666666">0.000002</span>,  <span style="color: #666666">0.00004</span>),
(<span style="color: #BA2121">&#39;Sirius A&#39;</span>,            <span style="color: #666666">8.6</span>,  <span style="color: #666666">1.00</span>,      <span style="color: #666666">23.6</span>),
(<span style="color: #BA2121">&#39;Sirius B&#39;</span>,            <span style="color: #666666">8.6</span>,  <span style="color: #666666">0.001</span>,     <span style="color: #666666">0.003</span>),
(<span style="color: #BA2121">&#39;Ross 154&#39;</span>,            <span style="color: #666666">9.4</span>,  <span style="color: #666666">0.00002</span>,   <span style="color: #666666">0.0005</span>),
]
</pre></div>
<p>
The purpose of this exercise
is to sort this list with respect to distance, apparent brightness,
and luminosity.
Write a program that initializes the <code>data</code> list as above
and writes out
three sorted tables: star name versus distance,
star name versus apparent brightness, and
star name versus luminosity.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_32_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_32_1">

<p>
To sort a list <code>data</code>,
one can call <code>sorted(data)</code>, as in

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">for</span> item <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(data):
    <span style="color: #666666">...</span>
</pre></div>
<p>
However, in the present case each element is a 4-tuple, and the
default sorting of such 4-tuples results in a list with the stars
appearing in alphabetic order.  This is not what you want. Instead, we
need to sort with respect to the 2nd, 3rd, or 4th element of each
4-tuple. If such a tailored sort mechanism is necessary, we can
provide our own sort function as a second argument to <code>sorted</code>:
<code>sorted(data, mysort)</code>.  A sort function <code>mysort</code> must take two
arguments, say <code>a</code> and <code>b</code>, and return \( -1 \) if <code>a</code> should become
before <code>b</code> in the sorted sequence, 1 if <code>b</code> should become before <code>a</code>,
and 0 if they are equal.  In the present case, <code>a</code> and <code>b</code> are
4-tuples, so we need to make the comparison between the right elements
in <code>a</code> and <code>b</code>.  For example, to sort with respect to luminosity we
can write

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">mysort</span>(a, b):
    <span style="color: #008000; font-weight: bold">if</span> a[<span style="color: #666666">3</span>] <span style="color: #666666">&lt;</span> b[<span style="color: #666666">3</span>]:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">-1</span>
    <span style="color: #008000; font-weight: bold">elif</span> a[<span style="color: #666666">3</span>] <span style="color: #666666">&gt;</span> b[<span style="color: #666666">3</span>]:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
</pre></div>
<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->
Filename: <code>sorted_stars_data.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex37">Exercise 33: Find prime numbers</h2>

<p>
The <em>Sieve of Eratosthenes</em> is an algorithm for finding all prime
numbers less than or equal to a number \( N \). Read about this algorithm
on Wikipedia and implement it in a Python program.
Filename: <code>find_primes.py</code>.

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:input:ex35">Exercise 34: Resolve a problem with a function</h2>

<p>
Consider the following interactive session:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">f</span>(x):
<span style="color: #666666">...</span>     <span style="color: #008000; font-weight: bold">if</span> <span style="color: #666666">0</span> <span style="color: #666666">&lt;=</span> x <span style="color: #666666">&lt;=</span> <span style="color: #666666">2</span>:
<span style="color: #666666">...</span>         <span style="color: #008000; font-weight: bold">return</span> x<span style="color: #666666">**2</span>
<span style="color: #666666">...</span>     <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #666666">2</span> <span style="color: #666666">&lt;</span> x <span style="color: #666666">&lt;=</span> <span style="color: #666666">4</span>:
<span style="color: #666666">...</span>         <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">4</span>
<span style="color: #666666">...</span>     <span style="color: #008000; font-weight: bold">elif</span> x <span style="color: #666666">&lt;</span> <span style="color: #666666">0</span>:
<span style="color: #666666">...</span>         <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
<span style="color: #666666">...</span>
<span style="color: #666666">&gt;&gt;&gt;</span> f(<span style="color: #666666">2</span>)
<span style="color: #666666">4</span>
<span style="color: #666666">&gt;&gt;&gt;</span> f(<span style="color: #666666">5</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> f(<span style="color: #666666">10</span>)
</pre></div>
<p>
Why do we not get any output when calling <code>f(5)</code> and <code>f(10)</code>?

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_34_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_34_1">

<p>
Save the <code>f</code> value in a variable <code>r</code> and do <code>print r</code>.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex20">Exercise 35: Determine the types of some objects</h2>

<p>
Consider the following calls to
the <code>makelist</code> function from the section <a href="._funcif-bootstrap001.html#sec:basic:makelist">Beyond mathematical functions</a>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">l1 <span style="color: #666666">=</span> makelist(<span style="color: #666666">0</span>, <span style="color: #666666">100</span>, <span style="color: #666666">1</span>)
l2 <span style="color: #666666">=</span> makelist(<span style="color: #666666">0</span>, <span style="color: #666666">100</span>, <span style="color: #666666">1.0</span>)
l3 <span style="color: #666666">=</span> makelist(<span style="color: #666666">-1</span>, <span style="color: #666666">1</span>, <span style="color: #666666">0.1</span>)
l4 <span style="color: #666666">=</span> makelist(<span style="color: #666666">10</span>, <span style="color: #666666">20</span>, <span style="color: #666666">20</span>)
l5 <span style="color: #666666">=</span> makelist([<span style="color: #666666">1</span>,<span style="color: #666666">2</span>], [<span style="color: #666666">3</span>,<span style="color: #666666">4</span>], [<span style="color: #666666">5</span>])
l6 <span style="color: #666666">=</span> makelist((<span style="color: #666666">1</span>,<span style="color: #666666">-1</span>,<span style="color: #666666">1</span>), (<span style="color: #BA2121">&#39;myfile.dat&#39;</span>, <span style="color: #BA2121">&#39;yourfile.dat&#39;</span>))
l7 <span style="color: #666666">=</span> makelist(<span style="color: #BA2121">&#39;myfile.dat&#39;</span>, <span style="color: #BA2121">&#39;yourfile.dat&#39;</span>, <span style="color: #BA2121">&#39;herfile.dat&#39;</span>)
</pre></div>
<p>
Simulate each call by hand to determine what type of objects that
become elements in the returned list and what the contents of <code>value</code>
is after one pass in the loop.

<p>
<!-- --- begin hint in exercise --- -->

<p>
<a class="glyphicon glyphicon-hand-right showdetails" data-toggle="collapse"
 data-target="#exer_35_1" style="font-size: 80%;"></a>
<b>Hint.</b>
<div class="collapse-group">
<p><div class="collapse" id="exer_35_1">

<p>
Note that some of the calls will lead to infinite loops
if you really perform the above <code>makelist</code> calls on a computer.

<p>
You can go to the <a href="http://www.pythontutor.com/" target="_self">Online Python Tutor</a>, paste in the <code>makelist</code> function and
the session above, and step through the program to see what actually
happens.

<p>
</div></p>
</div>
</p>

<p>
<!-- --- end hint in exercise --- -->

<p>
<!-- Closing remarks for this Exercise -->

<h3 id="___sec78">Remarks </h3>

<p>
This exercise demonstrates that we can write a function and have in mind
certain types of arguments, here typically <code>int</code> and <code>float</code>
objects. However, the function can be used with other (originally unintended)
arguments, such as lists and strings
in the present case, leading to strange and
irrelevant behavior (the problem here lies in the boolean expression
<code>value &lt;= stop</code> which is meaningless for some of the arguments).

<p>
<!-- --- end exercise --- -->

<p>
<!-- --- begin exercise --- -->

<h2 id="sec:basic:ex34">Exercise 36: Find an error in a program</h2>

<p>
Consider the following program for computing

$$
\begin{equation*} f(x)= e^{rx}\sin(mx) + e^{sx}\sin(nx)\tp\end{equation*}
$$

<p>

<iframe width="950" height="500" frameborder="0"
        src="http://pythontutor.com/iframe-embed.html#code=def+f%28x%2C+m%2C+n%2C+r%2C+s%29%3A%0A++++return+expsin%28x%2C+r%2C+m%29+%2B+expsin%28x%2C+s%2C+n%29%0A%0Ax+%3D+2.5%0Aprint+f%28x%2C+0.1%2C+0.2%2C+1%2C+1%29%0A%0Afrom+math+import+exp%2C+sin%0A%0Adef+expsin%28x%2C+p%2C+q%29%3A%0A++++return+exp%28p%2Ax%29%2Asin%28q%2Ax%29&curInstr=0&py=2&cumulative=false">
</iframe>
<p>
Running this code results in

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">NameError: global name &#39;expsin&#39; is not defined
</pre></div>
</blockquote><p>
What is the problem? Simulate the program flow by hand, use the
debugger to step from line to line, or use the Online Python Tutor.
Correct the program.

<p>
<!-- --- end exercise --- -->

<h1 id="___sec80">References </h1>

<p>
<!-- begin bibliography -->

<ol>
 <li> <div id="Langtangen_TCSE6_debug"></div> <b>H. P. Langtangen</b>. 
    Debugging in Python,
    <a href="http://hplgit.github.io/primer.html/doc/pub/debug" target="_self"><tt>http://hplgit.github.io/primer.html/doc/pub/debug</tt></a>.</li>
 <li> <div id="TCSE3"></div> <b>H. P. Langtangen</b>. 
    <em>Python Scripting for Computational Science</em>,
    3rd edition,
    <em>Texts in Computational Science and Engineering</em>,
    Springer,
    2009.</li>
</ol>

<!-- end bibliography -->

<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._funcif-bootstrap003.html">&larr; Prev</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

