<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Dictionaries and strings">
<meta name="keywords" content="dictionary,keys (dictionaries),immutable objects,mutable objects,summing a list,summing over an iterator,dictionary comprehensions,nested dictionaries,dictionary nested,date conversion,plotting data vs date,string slicing,slicing,substrings,string substrings,string searching,string find,string substitution,substitution (in text),string replace,string splitting,string case change,string testing for number,whitespace,blank lines in files,string stripping leading/trailing blanks,string joining words,dictionary functionality">

<title>Dictionaries and strings</title>

<!-- Bootstrap style: bootstrap_simula -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.rawgit.com/hplgit/doconce/master/bundled/html_styles/style_bootstrap/css/bootstrap_simula.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }

/* Add scrollbar to dropdown menus in bootstrap navigation bar */
.dropdown-menu {
   height: auto;
   max-height: 400px;
   overflow-x: hidden;
}

/* Adds an invisible element before each target to offset for the navigation
   bar */
.anchor::before {
  content:"";
  display:block;
  height:50px; /* fixed header height*/
  margin:-50px 0 0; /* negative fixed header height */
}

body { font-size:20px;line-height:1.5; }
</style>


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [('Table of contents',
               1,
               'table_of_contents',
               'table_of_contents'),
              (u'Dictionaries', 1, u'sec:files:dicts', u'sec:files:dicts'),
              (u'Making dictionaries', 2, None, '___sec1'),
              (u'Dictionary operations', 2, None, '___sec2'),
              (u'Remark', 3, None, '___sec3'),
              (u'Example: Polynomials as dictionaries',
               2,
               u'sec:files:poly',
               u'sec:files:poly'),
              (u'Dictionaries with default values and ordering',
               2,
               u'sec:files:dict:default:order',
               u'sec:files:dict:default:order'),
              (u'Dictionaries with default values', 3, None, '___sec6'),
              (u'Ordered dictionaries', 3, None, '___sec7'),
              (u'Example: Storing file data in dictionaries',
               2,
               u'sec:files:dict:density',
               u'sec:files:dict:density'),
              (u'Problem', 3, None, '___sec9'),
              (u'Solution', 3, None, '___sec10'),
              (u'Example: Storing file data in nested dictionaries',
               2,
               u'sec:files:dictdict',
               u'sec:files:dictdict'),
              (u'Problem', 3, None, '___sec12'),
              (u'Algorithm', 3, None, '___sec13'),
              (u'Implementation', 3, None, '___sec14'),
              (u'Dissection', 3, None, '___sec15'),
              (u'Example: Reading and plotting data recorded at specific dates',
               2,
               u'sec:files:stockprices',
               u'sec:files:stockprices'),
              (u'Problem', 3, None, '___sec17'),
              (u'Solution', 3, None, '___sec18'),
              (u'Strings', 1, u'sec:files:str', u'sec:files:str'),
              (u'Common operations on strings',
               2,
               u'sec:files:stringop',
               u'sec:files:stringop'),
              (u'Substring specification', 3, None, '___sec21'),
              (u'Searching for substrings', 3, None, '___sec22'),
              (u'Substitution', 3, None, '___sec23'),
              (u'String splitting', 3, None, '___sec24'),
              (u'Upper and lower case', 3, None, '___sec25'),
              (u'Strings are constant', 3, None, '___sec26'),
              (u'Strings with digits only', 3, None, '___sec27'),
              (u'Whitespace', 3, None, '___sec28'),
              (u'Joining strings', 3, None, '___sec29'),
              (u'Example: Reading pairs of numbers',
               2,
               u'sec:files:pairs',
               u'sec:files:pairs'),
              (u'Problem', 3, None, '___sec31'),
              (u'Solution', 3, None, '___sec32'),
              (u'Example: Reading coordinates', 2, None, '___sec33'),
              (u'Problem', 3, None, '___sec34'),
              (u'Solution 1: substring extraction', 3, None, '___sec35'),
              (u'Solution 2: string search', 3, None, '___sec36'),
              (u'Solution 3: string split', 3, None, '___sec37'),
              (u'Reading data from web pages',
               1,
               u'sec:files:webtxt',
               u'sec:files:webtxt'),
              (u'About web pages',
               2,
               u'sec:files:HTMLintro',
               u'sec:files:HTMLintro'),
              (u'How to access web pages in programs',
               2,
               u'sec:files:urllib',
               u'sec:files:urllib'),
              (u'Alternative 1', 3, None, '___sec41'),
              (u'Alternative 2', 3, None, '___sec42'),
              (u'Example: Reading pure text files',
               2,
               u'sec:files:url:weather',
               u'sec:files:url:weather'),
              (u'Example: Extracting data from HTML',
               2,
               u'sec:files:url:interpret',
               u'sec:files:url:interpret'),
              (u'Handling non-English text',
               2,
               u'sec:files:encoding',
               u'sec:files:encoding'),
              (u'Reading and writing spreadsheet files',
               1,
               u'sec:files:csv',
               u'sec:files:csv'),
              (u'CSV files', 2, None, '___sec47'),
              (u'Reading CSV files', 2, None, '___sec48'),
              (u'Processing spreadsheet data', 2, None, '___sec49'),
              (u'Writing CSV files', 2, None, '___sec50'),
              (u'Remark', 3, None, '___sec51'),
              (u'Representing number cells with Numerical Python arrays',
               2,
               None,
               '___sec52'),
              (u'Using more high-level Numerical Python functionality',
               2,
               None,
               '___sec53'),
              (u'Making code that is compatible with Python 2 and 3',
               1,
               u'sec:dictstring:py23',
               u'sec:dictstring:py23'),
              (u'Basic differences between Python 2 and 3',
               2,
               None,
               '___sec55'),
              (u'`xrange` in Python 2 is `range` in Python 3',
               3,
               None,
               '___sec56'),
              (u'Python 3 often avoids returning lists and dictionaries',
               3,
               None,
               '___sec57'),
              (u'Library modules have different names', 3, None, '___sec58'),
              (u'Python 3 has unicode and byte strings', 3, None, '___sec59'),
              (u'Python 3 has different relative import syntax inside packages',
               3,
               None,
               '___sec60'),
              (u'Turning Python 2 code into Python 3 code',
               2,
               None,
               '___sec61'),
              (u'Summary', 1, None, '___sec62'),
              (u'Chapter topics', 2, None, '___sec63'),
              (u'Dictionaries', 3, None, '___sec64'),
              (u'Strings', 3, None, '___sec65'),
              (u'Downloading Internet files', 3, None, '___sec66'),
              (u'Terminology', 3, None, '___sec67'),
              (u'Example: A file database',
               2,
               u'sec:files:sumex',
               u'sec:files:sumex'),
              (u'Problem', 3, None, '___sec69'),
              (u'Solution', 3, None, '___sec70'),
              (u'Exercises',
               1,
               u'sec:files:exercises',
               u'sec:files:exercises'),
              (u'Exercise 1: Make a dictionary from a table',
               2,
               u'sec:files:ex2b:basic',
               u'sec:files:ex2b:basic'),
              (u'Exercise 2: Explore syntax differences: lists vs. dicts',
               2,
               u'sec:files:ex2',
               u'sec:files:ex2'),
              (u'Exercise 3: Use string operations to improve a program',
               2,
               u'sec:files:ex17',
               u'sec:files:ex17'),
              (u'Exercise 4: Interpret output from a program',
               2,
               u'sec:files:ex13',
               u'sec:files:ex13'),
              (u'Exercise 5: Make a dictionary',
               2,
               u'sec:files:ex2b',
               u'sec:files:ex2b'),
              (u'Exercise 6: Make a nested dictionary',
               2,
               u'sec:files:ex2c',
               u'sec:files:ex2c'),
              (u'Exercise 7: Make a nested dictionary from a file',
               2,
               u'sec:files:ex2d:nested',
               u'sec:files:ex2d:nested'),
              (u'Exercise 8: Make a nested dictionary from a file',
               2,
               u'sec:files:ex2d:nested2',
               u'sec:files:ex2d:nested2'),
              (u'Exercise 9: Compute the area of a triangle',
               2,
               u'sec:files:ex2d',
               u'sec:files:ex2d'),
              (u'Exercise 10: Compare data structures for polynomials',
               2,
               u'sec:files:ex16',
               u'sec:files:ex16'),
              (u'Exercise 11: Compute the derivative of a polynomial',
               2,
               u'sec:files:ex3',
               u'sec:files:ex3'),
              (u'Exercise 12: Specify functions on the command line',
               2,
               u'sec:basic:ex10',
               u'sec:basic:ex10'),
              (u'Exercise 13: Interpret function specifications',
               2,
               u'sec:basic:ex10b',
               u'sec:basic:ex10b'),
              (u'Exercise 14: Compare average temperatures in cities',
               2,
               u'sec:files:ex8',
               u'sec:files:ex8'),
              (u'Exercise 15: Generate an HTML report with figures',
               2,
               u'sec:files:ex21',
               u'sec:files:ex21'),
              (u'References', 1, None, '___sec87')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="dictstring-bootstrap.html">Dictionaries and strings</a>
  </div>

  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap000.html#table_of_contents" style="font-size: 80%;"><b>Table of contents</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:dicts" style="font-size: 80%;"><b>Dictionaries</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec1" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Making dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec2" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Dictionary operations</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec3" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remark</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:poly" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Polynomials as dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:dict:default:order" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Dictionaries with default values and ordering</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec6" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dictionaries with default values</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec7" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ordered dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:dict:density" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Storing file data in dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec9" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec10" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:dictdict" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Storing file data in nested dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec12" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec13" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Algorithm</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec14" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Implementation</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec15" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dissection</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#sec:files:stockprices" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Reading and plotting data recorded at specific dates</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec17" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap001.html#___sec18" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#sec:files:str" style="font-size: 80%;"><b>Strings</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#sec:files:stringop" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Common operations on strings</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec21" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Substring specification</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec22" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Searching for substrings</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec23" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Substitution</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec24" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String splitting</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec25" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Upper and lower case</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec26" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Strings are constant</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec27" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Strings with digits only</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec28" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Whitespace</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec29" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Joining strings</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#sec:files:pairs" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Reading pairs of numbers</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec31" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec32" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec33" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Reading coordinates</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec34" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec35" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution 1: substring extraction</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec36" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution 2: string search</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap002.html#___sec37" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution 3: string split</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:webtxt" style="font-size: 80%;"><b>Reading data from web pages</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:HTMLintro" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;About web pages</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:urllib" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;How to access web pages in programs</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#___sec41" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alternative 1</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#___sec42" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Alternative 2</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:url:weather" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Reading pure text files</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:url:interpret" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: Extracting data from HTML</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap003.html#sec:files:encoding" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Handling non-English text</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#sec:files:csv" style="font-size: 80%;"><b>Reading and writing spreadsheet files</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec47" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;CSV files</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec48" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Reading CSV files</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec49" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Processing spreadsheet data</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec50" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Writing CSV files</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec51" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remark</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec52" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Representing number cells with Numerical Python arrays</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap004.html#___sec53" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Using more high-level Numerical Python functionality</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#sec:dictstring:py23" style="font-size: 80%;"><b>Making code that is compatible with Python 2 and 3</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec55" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Basic differences between Python 2 and 3</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec56" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`xrange` in Python 2 is <code>range</code> in Python 3</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec57" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Python 3 often avoids returning lists and dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec58" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Library modules have different names</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec59" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Python 3 has unicode and byte strings</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec60" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Python 3 has different relative import syntax inside packages</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap005.html#___sec61" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Turning Python 2 code into Python 3 code</a></li>
     <!-- navigation toc: --> <li><a href="#___sec62" style="font-size: 80%;"><b>Summary</b></a></li>
     <!-- navigation toc: --> <li><a href="#___sec63" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Chapter topics</a></li>
     <!-- navigation toc: --> <li><a href="#___sec64" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dictionaries</a></li>
     <!-- navigation toc: --> <li><a href="#___sec65" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Strings</a></li>
     <!-- navigation toc: --> <li><a href="#___sec66" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Downloading Internet files</a></li>
     <!-- navigation toc: --> <li><a href="#___sec67" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Terminology</a></li>
     <!-- navigation toc: --> <li><a href="#sec:files:sumex" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Example: A file database</a></li>
     <!-- navigation toc: --> <li><a href="#___sec69" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Problem</a></li>
     <!-- navigation toc: --> <li><a href="#___sec70" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Solution</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:exercises" style="font-size: 80%;"><b>Exercises</b></a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2b:basic" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 1: Make a dictionary from a table</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 2: Explore syntax differences: lists vs. dicts</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex17" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 3: Use string operations to improve a program</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex13" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 4: Interpret output from a program</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2b" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 5: Make a dictionary</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2c" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 6: Make a nested dictionary</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2d:nested" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 7: Make a nested dictionary from a file</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2d:nested2" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 8: Make a nested dictionary from a file</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex2d" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 9: Compute the area of a triangle</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex16" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 10: Compare data structures for polynomials</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex3" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 11: Compute the derivative of a polynomial</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:basic:ex10" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 12: Specify functions on the command line</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:basic:ex10b" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 13: Interpret function specifications</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex8" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 14: Compare average temperatures in cities</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#sec:files:ex21" style="font-size: 80%;">&nbsp;&nbsp;&nbsp;Exercise 15: Generate an HTML report with figures</a></li>
     <!-- navigation toc: --> <li><a href="._dictstring-bootstrap007.html#___sec87" style="font-size: 80%;"><b>References</b></a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0006"></a>
<!-- !split -->
<p style="font-size:80%">This chapter is taken from the book <a href="http://www.springer.com/gp/book/9783662498866">A Primer on Scientific Programming with Python</a> by H. P. Langtangen, 5th edition, Springer, 2016.</p>

<h1 id="___sec62" class="anchor">Summary </h1>

<h2 id="___sec63" class="anchor">Chapter topics </h2>

<h3 id="___sec64" class="anchor">Dictionaries </h3>

<p>
Array or list-like objects with text or other (fixed-valued) Python
objects as indices are called dictionaries. They are very useful for
storing general collections of objects in a single data structure.
The table below displays some of the most important dictionary
operations.

<p>

<div class="row">
  <div class="col-xs-12">
    <table class="table table-striped table-hover table-condensed">
<thead>
<tr><td align="center"><b>                  Construction                 </b></td> <td align="center"><b>                                 Meaning                                 </b></td> </tr>
</thead>
<tbody>
<tr><td align="left">   <code>a = {}</code>                                </td> <td align="left">   initialize an empty dictionary                                               </td> </tr>
<tr><td align="left">   <code>a = {'point': [0,0.1], 'value': 7}</code>    </td> <td align="left">   initialize a dictionary                                                      </td> </tr>
<tr><td align="left">   <code>a = dict(point=[2,7], value=3)</code>        </td> <td align="left">   initialize a dictionary w/string keys                                        </td> </tr>
<tr><td align="left">   <code>a.update(b)</code>                           </td> <td align="left">   add/update key-value pairs from <code>b</code> in <code>a</code>             </td> </tr>
<tr><td align="left">   <code>a.update(key1=value1, key2=value2)</code>    </td> <td align="left">   add/update key-value pairs in <code>a</code>                                 </td> </tr>
<tr><td align="left">   <code>a['hide'] = True</code>                      </td> <td align="left">   add new key-value pair to <code>a</code>                                     </td> </tr>
<tr><td align="left">   <code>a['point']</code>                            </td> <td align="left">   get value corresponding to key <code>point</code>                            </td> </tr>
<tr><td align="left">   <code>for key in a:</code>                         </td> <td align="left">   loop over keys in unknown order                                              </td> </tr>
<tr><td align="left">   <code>for key in sorted(a):</code>                 </td> <td align="left">   loop over keys in alphabetic order                                           </td> </tr>
<tr><td align="left">   <code>'value' in a</code>                          </td> <td align="left">   <code>True</code> if string <code>value</code> is a key in <code>a</code>    </td> </tr>
<tr><td align="left">   <code>del a['point']</code>                        </td> <td align="left">   delete a key-value pair from <code>a</code>                                  </td> </tr>
<tr><td align="left">   <code>list(a.keys())</code>                        </td> <td align="left">   list of keys                                                                 </td> </tr>
<tr><td align="left">   <code>list(a.values())</code>                      </td> <td align="left">   list of values                                                               </td> </tr>
<tr><td align="left">   <code>len(a)</code>                                </td> <td align="left">   number of key-value pairs in <code>a</code>                                  </td> </tr>
<tr><td align="left">   <code>isinstance(a, dict)</code>                   </td> <td align="left">   is <code>True</code> if <code>a</code> is a dictionary                       </td> </tr>
</tbody>
    </table>
  </div> <!-- col-xs-12 -->
</div> <!-- cell row -->

<h3 id="___sec65" class="anchor">Strings </h3>

<p>
Some of the most useful functionalities in a string object <code>s</code> are
listed below.

<p>
<b>Split</b> the string into substrings separated by <code>delimiter</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>words <span style="color: #666666">=</span> s<span style="color: #666666">.</span>split(delimiter)
</pre></div>
<p>
<b>Join</b> elements in a list of strings:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>newstring <span style="color: #666666">=</span> delimiter<span style="color: #666666">.</span>join(words[i:j])
</pre></div>
<p>
Extract a <b>substring</b>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>substring <span style="color: #666666">=</span> s[<span style="color: #666666">2</span>:n<span style="color: #666666">-4</span>]
</pre></div>
<p>
<b>Replace</b> a substring <code>substr</code> by new a string <code>replacement</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>s_new <span style="color: #666666">=</span> s<span style="color: #666666">.</span>replace(substr, replacement)
</pre></div>
<p>
Check if a substring <b>is contained</b> within another string:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39;some text&#39;</span> <span style="color: #AA22FF; font-weight: bold">in</span> s:
    <span style="color: #666666">...</span>
</pre></div>
<p>
<b>Find</b> the index where some text starts:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>index <span style="color: #666666">=</span> s<span style="color: #666666">.</span>find(text)
<span style="color: #008000; font-weight: bold">if</span> index <span style="color: #666666">==</span> <span style="color: #666666">-1</span>:
    <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;Could not find &quot;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&quot; in &quot;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&quot; (text, s)</span>
<span style="color: #008000; font-weight: bold">else</span>:
    substring <span style="color: #666666">=</span> s[index:]  <span style="color: #408080; font-style: italic"># strip off chars before text</span>
</pre></div>
<p>
<b>Extend</b> a string:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>s <span style="color: #666666">+=</span> another_string     <span style="color: #408080; font-style: italic"># append at the end</span>
s <span style="color: #666666">=</span> another_string <span style="color: #666666">+</span> s  <span style="color: #408080; font-style: italic"># append at the beginning</span>
</pre></div>
<p>
Check if a string contains <b>whitespace only</b>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">if</span> s<span style="color: #666666">.</span>isspace():
   <span style="color: #666666">...</span>
</pre></div>
<p>
Note: you cannot change the characters in a string like you can change
elements in a list (a string is in this sense like a tuple). You have to
make a new string:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #666666">&gt;&gt;&gt;</span> filename <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;myfile1.txt&#39;</span>
<span style="color: #666666">&gt;&gt;&gt;</span> filename[<span style="color: #666666">6</span>] <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;2&#39;</span>
Traceback (most recent call last):
  <span style="color: #666666">...</span>
<span style="color: #D2413A; font-weight: bold">TypeError</span>: <span style="color: #BA2121">&#39;str&#39;</span> <span style="color: #008000">object</span> does <span style="color: #AA22FF; font-weight: bold">not</span> support item assignment
<span style="color: #666666">&gt;&gt;&gt;</span> filename<span style="color: #666666">.</span>replace(<span style="color: #BA2121">&#39;1&#39;</span>, <span style="color: #BA2121">&#39;2&#39;</span>)
<span style="color: #BA2121">&#39;myfile2.txt&#39;</span>
<span style="color: #666666">&gt;&gt;&gt;</span> filename[:<span style="color: #666666">6</span>] <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;2&#39;</span> <span style="color: #666666">+</span> filename[<span style="color: #666666">7</span>:]   <span style="color: #408080; font-style: italic"># &#39;myfile&#39; + &#39;2&#39; + &#39;.txt&#39;</span>
<span style="color: #BA2121">&#39;myfile2.txt&#39;</span>
</pre></div>

<h3 id="___sec66" class="anchor">Downloading Internet files </h3>

<p>
Internet files can be downloaded if we know their URL:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">urllib</span>
url <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;http://www.some.where.net/path/thing.html&#39;</span>
urllib<span style="color: #666666">.</span>urlretrieve(url, filename<span style="color: #666666">=</span><span style="color: #BA2121">&#39;thing.html&#39;</span>)
</pre></div>
<p>
The downloaded information is put in the local file <code>thing.html</code>
in the current working folder.
Alternatively, we can open the URL as a file object:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>webpage <span style="color: #666666">=</span> urllib<span style="color: #666666">.</span>urlopen(url)
</pre></div>
<p>
HTML files are often messy to interpret by string operations.

<h3 id="___sec67" class="anchor">Terminology </h3>

<p>
The important computer science topics in this document are

<ul>
  <li> dictionaries</li>
  <li> strings and string operations</li>
  <li> CSV files</li>
  <li> HTML files</li>
</ul>

<h2 id="sec:files:sumex" class="anchor">Example: A file database</h2>

<p>
<!-- names: www.funnyname.com/anonymous.html -->
<!-- Ola Nordmann -->
<!-- Jens Hansen -->
<!-- Sven Svensson, Svea Svensson -->
<!-- Aleko Konstantinov -->
<!-- Chan Siu Ming -->
<!-- Ivan Horvat -->
<!-- Ivan Petrov -->
<!-- Jan Met De Pet -->
<!-- Fred Nurk -->
<!-- Joe Bloggs -->
<!-- I. U. Ajn -->
<!-- Matti Meikalainen (ala skal ha a med todler) -->
<!-- Jean Dupont -->
<!-- Otto Normalverbraucher, Otto Normalzocker, Erika Mustermann -->
<!-- Hans Meier -->
<!-- Israel Israeli -->
<!-- Jona Jonsdottir (med akksent over hver o) -->
<!-- Si Polan -->
<!-- Mario Rossi -->
<!-- Nanashi No Gombe -->
<!-- Jonas Jonaitis -->
<!-- Jan Kowalski -->
<!-- Vasya Pupkin -->
<!-- Jovan Petrovic -->
<!-- Juan del Pueblo -->
<!-- Juan dela Cruz -->
<!-- Sipho Nkosi -->
<!-- Nguoi La -->
<!-- Juan Perez, Pablo Perez -->

<h3 id="___sec69" class="anchor">Problem </h3>

<p>
We have a file containing information about the courses that students
have taken.  The file format consists of blocks with student data,
where each block starts with the student's name (<code>Name:</code>), followed by
the courses that the student has taken. Each course line starts with
the name of the course, then comes the semester when the exam was
taken, then the size of the course in terms of credit points, and
finally the grade is listed (letters <code>A</code> to <code>F</code>).  Here is an example
of a file with three student entries:

<p>

<!-- code=text (!bc dat) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>Name: John Doe
Astronomy                         2003 fall 10 A
Introductory Physics              2003 fall 10 C
Calculus I                        2003 fall 10 A
Calculus II                       2004 spring 10 B
Linear Algebra                    2004 spring 10 C
Quantum Mechanics I               2004 fall 10 A
Quantum Mechanics II              2005 spring 10 A
Numerical Linear Algebra          2004 fall 5 E
Numerical Methods                 2004 spring 20 C

Name: Jan Modaal
Calculus I                        2005 fall 10 A
Calculus II                       2006 spring 10 A
Introductory C++ Programming      2005 fall 15 D
Introductory Python Programming   2006 spring 5 A
Astronomy                         2005 fall 10 A
Basic Philosophy                  2005 fall 10 F

Name: Kari Nordmann
Introductory Python Programming   2006 spring 5 A
Astronomy                         2005 fall 10 D
</pre></div>
<p>
Our problem consists of reading this file into a dictionary <code>data</code>
with the student name as key and a list of courses as value.  Each
element in the list of courses is a dictionary holding the course
name, the semester, the credit points, and the grade.  A value in the
<code>data</code> dictionary may look as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #BA2121">&#39;Kari Nordmann&#39;</span>: [{<span style="color: #BA2121">&#39;credit&#39;</span>: <span style="color: #666666">5</span>,
                   <span style="color: #BA2121">&#39;grade&#39;</span>: <span style="color: #BA2121">&#39;A&#39;</span>,
                   <span style="color: #BA2121">&#39;semester&#39;</span>: <span style="color: #BA2121">&#39;2006 spring&#39;</span>,
                   <span style="color: #BA2121">&#39;title&#39;</span>: <span style="color: #BA2121">&#39;Introductory Python Programming&#39;</span>},
                  {<span style="color: #BA2121">&#39;credit&#39;</span>: <span style="color: #666666">10</span>,
                   <span style="color: #BA2121">&#39;grade&#39;</span>: <span style="color: #BA2121">&#39;D&#39;</span>,
                   <span style="color: #BA2121">&#39;semester&#39;</span>: <span style="color: #BA2121">&#39;2005 fall&#39;</span>,
                   <span style="color: #BA2121">&#39;title&#39;</span>: <span style="color: #BA2121">&#39;Astronomy&#39;</span>}],
</pre></div>
<p>
Having the <code>data</code> dictionary, the next task is to print out the
average grade of each student.

<h3 id="___sec70" class="anchor">Solution </h3>

<p>
We divide the problem into two major tasks: loading the file data into
the <code>data</code> dictionary, and computing the average grades.
These two tasks are naturally placed in two functions.

<p>
We need to have a strategy for reading the file and interpreting the
contents. It will be natural to read the file line by line, and for
each line check if this is a line containing a new student's name, a
course information line, or a blank line.  In the latter case we jump
to the next pass in the loop. When a new student name is encountered,
we initialize a new entry in the <code>data</code> dictionary to an empty
list. In the case of a line about a course, we must interpret the
contents on that line, which we postpone a bit.

<p>
We can now sketch the algorithm described above in terms of some
unfinished Python code, just to get the overview:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">load</span>(studentfile):
    infile <span style="color: #666666">=</span> <span style="color: #008000">open</span>(studentfile, <span style="color: #BA2121">&#39;r&#39;</span>)
    data <span style="color: #666666">=</span> {}
    <span style="color: #008000; font-weight: bold">for</span> line <span style="color: #AA22FF; font-weight: bold">in</span> infile:
        i <span style="color: #666666">=</span> line<span style="color: #666666">.</span>find(<span style="color: #BA2121">&#39;Name:&#39;</span>)
        <span style="color: #008000; font-weight: bold">if</span> i <span style="color: #666666">!=</span> <span style="color: #666666">-1</span>:
            <span style="color: #408080; font-style: italic"># line contains &#39;Name:&#39;, extract the name.</span>
            <span style="color: #666666">...</span>
        <span style="color: #008000; font-weight: bold">elif</span> line<span style="color: #666666">.</span>isspace():     <span style="color: #408080; font-style: italic"># Blank line?</span>
            <span style="color: #008000; font-weight: bold">continue</span>             <span style="color: #408080; font-style: italic"># Yes, go to next loop iteration.</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            <span style="color: #408080; font-style: italic"># This must be a course line, interpret the line.</span>
            <span style="color: #666666">...</span>
    infile<span style="color: #666666">.</span>close()
    <span style="color: #008000; font-weight: bold">return</span> data
</pre></div>
<p>
If we find <code>'Name:'</code> as a substring in <code>line</code>, we must extract
the name. This can be done by the substring
<code>line[i+5:]</code>. Alternatively, we can split the line with respect to
colon and strip off the first word:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>words <span style="color: #666666">=</span> line<span style="color: #666666">.</span>split(<span style="color: #BA2121">&#39;:&#39;</span>)
name <span style="color: #666666">=</span> <span style="color: #BA2121">&#39; &#39;</span><span style="color: #666666">.</span>join(words[<span style="color: #666666">1</span>:])
</pre></div>
<p>
We have chosen the former strategy of extracting the name as a substring
in the final program.

<p>
Each course line is naturally split into words for extracting
information:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>words <span style="color: #666666">=</span> line<span style="color: #666666">.</span>split()
</pre></div>
<p>
The name of the course consists of a number of words, but we do not know
how many.
Nevertheless, we know that the final words contain the semester, the credit
points, and the grade. We can hence count from the right and extract
information, and when we are finished with the semester information,
the rest of the <code>words</code> list holds the words in the name of the course.
The code goes as follows:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>grade <span style="color: #666666">=</span> words[<span style="color: #666666">-1</span>]
credit <span style="color: #666666">=</span> <span style="color: #008000">int</span>(words[<span style="color: #666666">-2</span>])
semester <span style="color: #666666">=</span> <span style="color: #BA2121">&#39; &#39;</span><span style="color: #666666">.</span>join(words[<span style="color: #666666">-4</span>:<span style="color: #666666">-2</span>])
course_name <span style="color: #666666">=</span> <span style="color: #BA2121">&#39; &#39;</span><span style="color: #666666">.</span>join(words[:<span style="color: #666666">-4</span>])
data[name]<span style="color: #666666">.</span>append({<span style="color: #BA2121">&#39;title&#39;</span>:    course_name,
                   <span style="color: #BA2121">&#39;semester&#39;</span>: semester,
                   <span style="color: #BA2121">&#39;credit&#39;</span>:   credit,
                   <span style="color: #BA2121">&#39;grade&#39;</span>:    grade})
</pre></div>
<p>
This code is a good example of the usefulness of split and join
operations when extracting information from a text.

<p>
Now to the second task of computing the average grade. Since the grades
are letters we cannot compute with them. A natural way to proceed is to
convert the letters to numbers, compute the average number, and then
convert that number back to a letter.
Conversion between letters and numbers is easily represented by a dictionary:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>grade2number <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;A&#39;</span>: <span style="color: #666666">5</span>, <span style="color: #BA2121">&#39;B&#39;</span>: <span style="color: #666666">4</span>, <span style="color: #BA2121">&#39;C&#39;</span>: <span style="color: #666666">3</span>, <span style="color: #BA2121">&#39;D&#39;</span>: <span style="color: #666666">2</span>, <span style="color: #BA2121">&#39;E&#39;</span>: <span style="color: #666666">1</span>, <span style="color: #BA2121">&#39;F&#39;</span>: <span style="color: #666666">0</span>}
</pre></div>
<p>
To convert from numbers to grades, we construct the inverse dictionary:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>number2grade <span style="color: #666666">=</span> {}
<span style="color: #008000; font-weight: bold">for</span> grade <span style="color: #AA22FF; font-weight: bold">in</span> grade2number:
    number2grade[grade2number[grade]] <span style="color: #666666">=</span> grade
</pre></div>
<p>
In the computation of the average grade we should use a weighted
sum such that larger courses count more than smaller courses.
The weighted mean value of a set of numbers \( r_i \) with weights \( w_i \),
\( i=0,\ldots,n-1 \), is given by

$$
\begin{equation*} {\sum_{i=0}^{n-1} w_ir_i\over\sum_{i=0}^{n-1} w_i}\tp\end{equation*}
$$

This weighted mean value must then be rounded to the nearest integer,
which can be used as key in <code>number2grade</code> to find the corresponding
grade expressed as a letter.
The weight \( w_i \) is naturally taken as the number of credit points
in the course with grade \( r_i \).
The whole process is performed by the following function:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">average_grade</span>(data, name):
    <span style="color: #008000">sum</span> <span style="color: #666666">=</span> <span style="color: #666666">0</span>; weights <span style="color: #666666">=</span> <span style="color: #666666">0</span>
    <span style="color: #008000; font-weight: bold">for</span> course <span style="color: #AA22FF; font-weight: bold">in</span> data[name]:
        weight <span style="color: #666666">=</span> course[<span style="color: #BA2121">&#39;credit&#39;</span>]
        grade  <span style="color: #666666">=</span> course[<span style="color: #BA2121">&#39;grade&#39;</span>]
        <span style="color: #008000">sum</span> <span style="color: #666666">+=</span> grade2number[grade]<span style="color: #666666">*</span>weight
        weights <span style="color: #666666">+=</span> weight
    avg <span style="color: #666666">=</span> <span style="color: #008000">sum</span><span style="color: #666666">/</span><span style="color: #008000">float</span>(weights)
    <span style="color: #008000; font-weight: bold">return</span> number2grade[<span style="color: #008000">round</span>(avg)]
</pre></div>
<p>
The complete code is found in the file
<a href="http://tinyurl.com/pwyasaa/dictstring/student.py" target="_self"><tt>students.py</tt></a>.
Running this program gives the following output of the average grades:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span>John Doe: B
Kari Nordmann: C
Jan Modaal: C
</pre></div>
<p>
One feature of the <code>students.py</code> code is that the output of the names
are sorted after the last name. How can we accomplish that?
A straight <code>for name in data</code> loop will visit the keys in an unknown
(random) order. To visit the keys in alphabetic order, we must
use

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">for</span> name <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(data):
</pre></div>
<p>
This default sort will sort with respect to the first character in
the <code>name</code> strings. We want a sort according to the last part of
the name. A tailored sort function can then be
written.
In this function we
extract the last word in the names and compare them:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">sort_names</span>(name1, name2):
    last_name1 <span style="color: #666666">=</span> name1<span style="color: #666666">.</span>split()[<span style="color: #666666">-1</span>]
    last_name2 <span style="color: #666666">=</span> name2<span style="color: #666666">.</span>split()[<span style="color: #666666">-1</span>]
    <span style="color: #008000; font-weight: bold">if</span> last_name1 <span style="color: #666666">&lt;</span> last_name2:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">-1</span>
    <span style="color: #008000; font-weight: bold">elif</span> last_name1 <span style="color: #666666">&gt;</span> last_name2:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">1</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">0</span>
</pre></div>
<p>
We can now pass on <code>sort_names</code> to the <code>sorted</code> function to
get a sequence that is sorted with respect to the last word in the students'
names:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span></span><span style="color: #008000; font-weight: bold">for</span> name <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(data, sort_names):
    <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">: </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (name, average_grade(data, name))
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._dictstring-bootstrap005.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._dictstring-bootstrap007.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

