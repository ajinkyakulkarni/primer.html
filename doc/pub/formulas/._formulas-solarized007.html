<!--
Automatically generated HTML file from Doconce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Computing with formulas">
<meta name="keywords" content="directory,run Python program,execute Python program,terminal window,console (terminal) window,directory,comments,non-English characters,formatting text and numbers,printf syntax,string,triple-quoted strings,format string syntax,newline character (line break),line break,source code,application,statements,expression,syntax,whitespace,blanks,whitespace,input (data),output (data),user (of a program),operating system (OS),Windows,Mac OS X,Unix,Linux,objects,round-off errors,interactive sessions standard Python shell,type conversion,check an object's type,rounding float to integer,interactive sessions IPython,IPython,run Python program,execute Python program,IPython running Python programs,IPython start-up file,IPython executing operating system commands,IPython command history,complex numbers,Gaussian function">




<link href="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/html_styles/style_solarized_box/css/solarized_light_code.css" rel="stylesheet" type="text/css" title="light"/>
<script src="http://www.peterhaschke.com/assets/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link href="http://thomasf.github.io/solarized-css/solarized-light.min.css" rel="stylesheet">
<style type="text/css">
.alert-text-small   { font-size: 80%;  }
.alert-text-large   { font-size: 130%; }
.alert-text-normal  { font-size: 90%;  }
.alert {
  padding:8px 35px 8px 14px; margin-bottom:18px;
  text-shadow:0 1px 0 rgba(255,255,255,0.5);
  border:1px solid #93a1a1;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  color: #555;
  background-color: #eee8d5;
  background-position: 10px 5px;
  background-repeat: no-repeat;
  background-size: 38px;
  padding-left: 55px;
  width: 75%;
 }
.alert-block {padding-top:14px; padding-bottom:14px}
.alert-block > p, .alert-block > ul {margin-bottom:1em}
.alert li {margin-top: 1em}
.alert-block p+p {margin-top:5px}
.alert-notice { background-image: url(https://raw.github.com/hplgit/doconce/master/bundled/html_images/small_yellow_notice.png); }
.alert-summary  { background-image:url(https://raw.github.com/hplgit/doconce/master/bundled/html_images/small_yellow_summary.png); }
.alert-warning { background-image: url(https://raw.github.com/hplgit/doconce/master/bundled/html_images/small_yellow_warning.png); }
.alert-question {background-image:url(https://raw.github.com/hplgit/doconce/master/bundled/html_images/small_yellow_question.png); }

div { text-align: justify; text-justify: inter-word; }
</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(u' The first programming encounter: a formula ',
               1,
               u'sec:formula:1',
               u'sec:formula:1'),
              (u' Using a program as a calculator ',
               2,
               u'sec:formula:1st',
               u'sec:formula:1st'),
              (u' About programs and programming ', 2, None, '___sec2'),
              (u' Tools for writing programs ', 2, None, '___sec3'),
              (u' Writing and running your first Python program ',
               2,
               None,
               '___sec4'),
              (u' Warning about typing program text ', 2, None, '___sec5'),
              (u' Verifying the result ', 2, None, '___sec6'),
              (u' Using variables ',
               2,
               u'sec:formula:variables',
               u'sec:formula:variables'),
              (u' Names of variables ', 2, None, '___sec8'),
              (u' Reserved words in Python ',
               2,
               u'sec:formula:keywords',
               u'sec:formula:keywords'),
              (u' Comments ', 2, None, '___sec10'),
              (u' Remark ', 3, None, '___sec11'),
              (u' Formatting text and numbers ',
               2,
               u'sec:formula:format',
               u'sec:formula:format'),
              (u' Printf syntax ', 3, None, '___sec13'),
              (u' Format string syntax ', 3, None, '___sec14'),
              (u' The newline character ', 3, None, '___sec15'),
              (u' Computer science glossary ',
               1,
               u'sec:formula:glossary',
               u'sec:formula:glossary'),
              (u' Another formula: Celsius-Fahrenheit conversion ',
               1,
               u'sec:formula:c2f',
               u'sec:formula:c2f'),
              (u' Potential error: integer division ',
               2,
               u'sec:formula:intdiv',
               u'sec:formula:intdiv'),
              (u' Straightforward coding of the formula ',
               3,
               None,
               '___sec19'),
              (u' Verifying the results ', 3, None, '___sec20'),
              (u' Float and integer division ', 3, None, '___sec21'),
              (u' Objects in Python ', 2, None, '___sec22'),
              (u' Avoiding integer division ',
               2,
               u'sec:formula:c2f:correct',
               u'sec:formula:c2f:correct'),
              (u' Locating potential integer division ', 3, None, '___sec24'),
              (u' Remark ', 3, None, '___sec25'),
              (u' Arithmetic operators and precedence ',
               2,
               u'sec:formula:operators',
               u'sec:formula:operators'),
              (u' Evaluating standard mathematical functions ',
               1,
               u'sec:formula:stdmath',
               u'sec:formula:stdmath'),
              (u' Example: Using the square root function ',
               2,
               u'sec:formula:sqrt',
               u'sec:formula:sqrt'),
              (u' Problem ', 3, None, '___sec29'),
              (u' The program ', 3, None, '___sec30'),
              (u' Two ways of importing a module ', 3, None, '___sec31'),
              (u' Import with new names ', 3, None, '___sec32'),
              (u' Example: Computing with $\\sinh x$ ', 2, None, '___sec33'),
              (u' A first glimpse of round-off errors ',
               2,
               u'sec:formula:roundoff',
               u'sec:formula:roundoff'),
              (u' Interactive computing ',
               1,
               u'sec:formula:pyshell',
               u'sec:formula:pyshell'),
              (u' Using the Python shell ', 2, None, '___sec36'),
              (u' Type conversion ',
               2,
               u'sec:formulas:typeconversion',
               u'sec:formulas:typeconversion'),
              (u' IPython ',
               2,
               u'sec:formula:ipython',
               u'sec:formula:ipython'),
              (u' Running programs ', 3, None, '___sec39'),
              (u' Quick recovery of previous output ', 3, None, '___sec40'),
              (u' Tab completion ', 3, None, '___sec41'),
              (u' Recovering previous commands ', 3, None, '___sec42'),
              (u' Running Unix/Windows commands ', 3, None, '___sec43'),
              (u' Notebooks ', 3, None, '___sec44'),
              (u' Complex numbers ',
               1,
               u'sec:formula:complex',
               u'sec:formula:complex'),
              (u' Complex arithmetics in Python ', 2, None, '___sec46'),
              (u' Complex functions in Python ', 2, None, '___sec47'),
              (u' Unified treatment of complex and real functions ',
               2,
               u'formulas:unified:complex:real',
               u'formulas:unified:complex:real'),
              (u' Symbolic computing ',
               1,
               u'sec:formula:sympy',
               u'sec:formula:sympy'),
              (u' Basic differentiation and integration ',
               2,
               u'sec:formula:sympy:diffint',
               u'sec:formula:sympy:diffint'),
              (u' Equation solving and Taylor series ', 2, None, '___sec51'),
              (u' Summary ',
               1,
               u'sec:formula:summary',
               u'sec:formula:summary'),
              (u' Chapter topics ', 2, None, '___sec53'),
              (u' Programs must be accurate! ', 3, None, '___sec54'),
              (u' Variables ', 3, None, '___sec55'),
              (u' Comment lines ', 3, None, '___sec56'),
              (u' Object types ', 3, None, '___sec57'),
              (u' Operators ', 3, None, '___sec58'),
              (u' Common mathematical functions ', 3, None, '___sec59'),
              (u' Print ', 3, None, '___sec60'),
              (u' Complex numbers ', 3, None, '___sec61'),
              (u' Terminology ', 3, None, '___sec62'),
              (u' Example: Trajectory of a ball ', 2, None, '___sec63'),
              (u' Problem ', 3, None, '___sec64'),
              (u' Solution ', 3, None, '___sec65'),
              (u' About typesetting conventions in this book ',
               2,
               None,
               '___sec66'),
              (u' Style guide for Python code ', 3, None, '___sec67'),
              (u' Exercises ', 1, u'sec:formula:exer', u'sec:formula:exer'),
              (u' What does it mean to solve an exercise? ',
               3,
               None,
               '___sec69'),
              (u' Exercise 1: Compute 1+1 ',
               2,
               u'sec:formula:ex0',
               u'sec:formula:ex0'),
              (u' Exercise 2: Write a Hello World program ',
               2,
               u'sec:formula:ex5',
               u'sec:formula:ex5'),
              (u' Exercise 3: Derive and compute a formula ',
               2,
               u'sec:formula:ex16',
               u'sec:formula:ex16'),
              (u' Exercise 4: Convert from meters to British length units ',
               2,
               u'sec:formula:ex9',
               u'sec:formula:ex9'),
              (u' Exercise 5: Compute the mass of various substances ',
               2,
               u'sec:formula:exex3',
               u'sec:formula:exex3'),
              (u' Exercise 6: Compute the growth of money in a bank ',
               2,
               u'sec:formula:ex3',
               u'sec:formula:ex3'),
              (u' Exercise 7: Find error(s) in a program ',
               2,
               u'sec:formula:ex12',
               u'sec:formula:ex12'),
              (u' Exercise 8: Type in program text ',
               2,
               u'sec:formula:exex1',
               u'sec:formula:exex1'),
              (u' Exercise 9: Type in programs and debug them ',
               2,
               u'sec:formula:exex2a',
               u'sec:formula:exex2a'),
              (u' Exercise 10: Evaluate a Gaussian function ',
               2,
               u'sec:formula:ex7',
               u'sec:formula:ex7'),
              (u' Remarks ', 3, None, '___sec80'),
              (u' Exercise 11: Compute the air resistance on a football ',
               2,
               u'sec:formula:ex11',
               u'sec:formula:ex11'),
              (u' Exercise 12: How to cook the perfect egg ',
               2,
               u'sec:formula:ex14',
               u'sec:formula:ex14'),
              (u' Exercise 13: Derive the trajectory of a ball ',
               2,
               u'sec:formula:ex13',
               u'sec:formula:ex13'),
              (u' Exercise 14: Find errors in the coding of formulas ',
               2,
               u'sec:formula:ex1',
               u'sec:formula:ex1'),
              (u' Exercise 15: Explain why a program does not work ',
               2,
               u'sec:formula:ex15',
               u'sec:formula:ex15'),
              (u' Exercise 16: Find errors in Python statements ',
               2,
               u'sec:formula:ex2',
               u'sec:formula:ex2'),
              (u' Exercise 17: Find errors in the coding of a formula ',
               2,
               u'sec:formula:ex4',
               u'sec:formula:ex4'),
              (u' References ', 1, None, '___sec88')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
\renewcommand{\Re}{\bbbr}

\newcommand{\rhodim}{\mbox{kgm}^{-3}}
\newcommand{\mudim}{\mbox{kg}\,\mbox{s}^{-1}\mbox{m}^{-1}}
\newcommand{\Cdim}{\mbox{kg}\,\mbox{s}^{-1}}


\newcommand{\Oof}[1]{\mathcal{O}(#1)}
\newcommand{\Prob}[1]{\hbox{P}(#1)}
\newcommand{\Var}[1]{\hbox{Var}(#1)}
\newcommand{\Cov}[2]{\hbox{Cov}(#1,#2)}
\newcommand{\StDev}[1]{\hbox{StDev}(#1)}
$$




    
<a name="part0007"></a>
<p>
<!-- begin top navigation -->
<table style="width: 100%"><tr><td>
<div style="text-align: left;"><a href="._formulas-solarized006.html">&laquo; Previous</a></div>
</td><td>
<div style="text-align: right;"><a href="._formulas-solarized008.html">Next &raquo;</a></div>
</td></tr></table>
<!-- end top navigation -->
</p>

<p>
<!-- !split -->

<h1>Symbolic computing <a name="sec:formula:sympy"></a></h1>

Python has a package SymPy for doing symbolic computing, such as
symbolic (exact) integration, differentiation, equation solving,
and expansion of Taylor series, to mention some common operations in
mathematics.  We shall here only give a glimpse of SymPy in action
with the purpose of drawing attention to this powerful part of Python.

<p>
For interactive work with SymPy it is recommended to either use
IPython or the special, interactive shell <code>isympy</code>, which is installed
along with SymPy itself.

<p>
Import of SymPy functionality is often done via <code>from sympy import *</code>,
but below we shall explicitly import each symbol we need to emphasize
that the symbol comes from SymPy. For example, it will be important
to know whether <code>sin</code> means the sine function from the <code>math</code> module
or the special sine function from <code>sympy</code> aimed at symbolic computing.

<h2>Basic differentiation and integration <a name="sec:formula:sympy:diffint"></a></h2>

The following session shows how easy it is to differentiate a formula
\( v_0t - \frac{1}{2}gt^2 \) with respect to \( t \) and integrate the answer
to get the formula back:

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; from sympy import (
...     symbols,   # define mathematical symbols for symbolic math
...     diff,      # differentiate expressions
...     integrate, # integrate expressions
...     Rational,  # define rational numbers
...     lambdify,  # turn symbolic expressions into Python functions
...     )
&gt;&gt;&gt; t, v0, g = symbols('t v0 g')
&gt;&gt;&gt; y = v0*t - Rational(1,2)*g*t**2
&gt;&gt;&gt; dydt = diff(y, t)
&gt;&gt;&gt; dydt
-g*t + v0
&gt;&gt;&gt; print 'acceleration:', diff(y, t, t)  # 2nd derivative
acceleration: -g
&gt;&gt;&gt; y2 = integrate(dydt, t)
&gt;&gt;&gt; y2
-g*t**2/2 + t*v0
</code></pre>
<!-- end verbatim block -->
Note here that <code>t</code> is a <em>symbolic variable</em> (not a <code>float</code> as it is
in numerical computing), and <code>y</code> is a <em>symbolic expression</em> (not
a <code>float</code> as it would be in numerical computing).

<p>
A very convenient feature of SymPy is that symbolic expressions can be
turned into ordinary Python functions via <code>lambdify</code>. Let us take the
<code>dydt</code> expression above and turn it into a Python function <code>v(t, v0, g)</code>:

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; v = lambdify([t, v0, g],  # arguments in v
                 dydt)        # symbolic expression
&gt;&gt;&gt; v(0, 5, 9.81)
5
&gt;&gt;&gt; v(2, 5, 9.81)
-14.62
&gt;&gt;&gt; 5 - 9.81*2  # control the previous calculation
-14.62
</code></pre>
<!-- end verbatim block -->

<h2>Equation solving and Taylor series  <a name="___sec51"></a></h2>

A linear equation defined through an expression <code>e</code> that is zero, can
be solved by <code>solve(e, t)</code>, if <code>t</code> is the unknown (symbol) in the
equation. Here we may find the roots of \( y=0 \):

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; # Find t values such that y=0
&gt;&gt;&gt; from sympy import solve
&gt;&gt;&gt; roots = solve(y, t)
&gt;&gt;&gt; roots
[0, 2*v0/g]
</code></pre>
<!-- end verbatim block -->
We can easily check the answer by inserting the roots in \( y \).
Inserting an expression <code>e2</code> for <code>e1</code> in some expression <code>e</code>
is done by <code>e.subs(e1, e2)</code>. In our case we check that

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; y.subs(t, roots[0])
0
&gt;&gt;&gt; y.subs(t, roots[1])
0
</code></pre>
<!-- end verbatim block -->

<p>
A Taylor polynomial of order <code>n</code> for an expression <code>e</code> in a variable
<code>t</code> around the point <code>t0</code> is computed by <code>e.series(t, t0, n)</code>.
Testing this on \( e^t \) and \( e^{\sin(t)} \) gives

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; from sympy import exp, sin, cos
&gt;&gt;&gt; f = exp(t)
&gt;&gt;&gt; f.series(t, 0, 3)
1 + t + t**2/2 + O(t**3)
&gt;&gt;&gt; f = exp(sin(t))
&gt;&gt;&gt; f.series(t, 0, 8)
1 + t + t**2/2 - t**4/8 - t**5/15 - t**6/240 + t**7/90 + O(t**8)
</code></pre>
<!-- end verbatim block -->

<p>
Output of mathematical expressions in the LaTeX typesetting
system is possible:

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; from sympy import latex
&gt;&gt;&gt; print latex(f.series(t, 0, 7))
'1 + t + \frac{t^{2}}{2} - \frac{t^{4}}{8} - \frac{t^{5}}{15} -
\frac{t^{6}}{240} + \mathcal{O}\left(t^{7}\right)'
</code></pre>
<!-- end verbatim block -->

<p>
Finally, we mention that there are tools for expanding and
simplifying expressions:

<p>
<!-- begin verbatim block  pyshell-->
<pre><code>&gt;&gt;&gt; from sympy import simplify, expand
&gt;&gt;&gt; x, y = symbols('x y')
&gt;&gt;&gt; f = -sin(x)*sin(y) + cos(x)*cos(y)
&gt;&gt;&gt; simplify(f)
cos(x + y)
&gt;&gt;&gt; expand(sin(x+y), trig=True)  # requires a trigonometric hint
sin(x)*cos(y) + sin(y)*cos(x)
</code></pre>
<!-- end verbatim block -->
Later chapters utilize SymPy where
it can save some algebraic work, but this document is almost
exclusively devoted to numerical computing.

<p>
<p>
<!-- begin bottom navigation -->
<table style="width: 100%"><tr><td>
<div style="text-align: left;"><a href="._formulas-solarized006.html">&laquo; Previous</a></div>
</td><td>
<div style="text-align: right;"><a href="._formulas-solarized008.html">Next &raquo;</a></div>
</td></tr></table>
<!-- end bottom navigation -->
</p>

<!-- ------------------- end of main content --------------- -->


</body>
</html>
    

