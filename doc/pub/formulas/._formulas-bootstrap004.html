<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Computing with formulas">
<meta name="keywords" content="directory,run Python program,execute Python program,terminal window,console (terminal) window,directory,comments,non-English characters,formatting text and numbers,printf syntax,string,triple-quoted strings,format string syntax,newline character (line break),line break,source code,application,statements,expression,syntax,whitespace,blanks,whitespace,input (data),output (data),user (of a program),operating system (OS),Windows,Mac OS X,Unix,Linux,objects,round-off errors,interactive sessions standard Python shell,type conversion,check an object's type,rounding float to integer,interactive sessions IPython,IPython,run Python program,execute Python program,IPython running Python programs,IPython start-up file,IPython executing operating system commands,IPython command history,complex numbers,Gaussian function">

<title>Computing with formulas</title>

<!-- Bootstrap style: bootswatch_readable -->
<link href="http://netdna.bootstrapcdn.com/bootswatch/3.1.1/readable/bootstrap.min.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }
</style>

</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(u' The first programming encounter: a formula ',
               1,
               u'sec:formula:1',
               u'sec:formula:1'),
              (u' Using a program as a calculator ',
               2,
               u'sec:formula:1st',
               u'sec:formula:1st'),
              (u' About programs and programming ', 2, None, '___sec2'),
              (u' Tools for writing programs ', 2, None, '___sec3'),
              (u' Writing and running your first Python program ',
               2,
               None,
               '___sec4'),
              (u' Warning about typing program text ', 2, None, '___sec5'),
              (u' Verifying the result ', 2, None, '___sec6'),
              (u' Using variables ',
               2,
               u'sec:formula:variables',
               u'sec:formula:variables'),
              (u' Names of variables ', 2, None, '___sec8'),
              (u' Reserved words in Python ',
               2,
               u'sec:formula:keywords',
               u'sec:formula:keywords'),
              (u' Comments ', 2, None, '___sec10'),
              (u' Remark ', 3, None, '___sec11'),
              (u' Formatting text and numbers ',
               2,
               u'sec:formula:format',
               u'sec:formula:format'),
              (u' Printf syntax ', 3, None, '___sec13'),
              (u' Format string syntax ', 3, None, '___sec14'),
              (u' The newline character ', 3, None, '___sec15'),
              (u' Computer science glossary ',
               1,
               u'sec:formula:glossary',
               u'sec:formula:glossary'),
              (u' Another formula: Celsius-Fahrenheit conversion ',
               1,
               u'sec:formula:c2f',
               u'sec:formula:c2f'),
              (u' Potential error: integer division ',
               2,
               u'sec:formula:intdiv',
               u'sec:formula:intdiv'),
              (u' Straightforward coding of the formula ',
               3,
               None,
               '___sec19'),
              (u' Verifying the results ', 3, None, '___sec20'),
              (u' Float and integer division ', 3, None, '___sec21'),
              (u' Objects in Python ', 2, None, '___sec22'),
              (u' Avoiding integer division ',
               2,
               u'sec:formula:c2f:correct',
               u'sec:formula:c2f:correct'),
              (u' Locating potential integer division ', 3, None, '___sec24'),
              (u' Remark ', 3, None, '___sec25'),
              (u' Arithmetic operators and precedence ',
               2,
               u'sec:formula:operators',
               u'sec:formula:operators'),
              (u' Evaluating standard mathematical functions ',
               1,
               u'sec:formula:stdmath',
               u'sec:formula:stdmath'),
              (u' Example: Using the square root function ',
               2,
               u'sec:formula:sqrt',
               u'sec:formula:sqrt'),
              (u' Problem ', 3, None, '___sec29'),
              (u' The program ', 3, None, '___sec30'),
              (u' Two ways of importing a module ', 3, None, '___sec31'),
              (u' Import with new names ', 3, None, '___sec32'),
              (u' Example: Computing with $\\sinh x$ ', 2, None, '___sec33'),
              (u' A first glimpse of round-off errors ',
               2,
               u'sec:formula:roundoff',
               u'sec:formula:roundoff'),
              (u' Interactive computing ',
               1,
               u'sec:formula:pyshell',
               u'sec:formula:pyshell'),
              (u' Using the Python shell ', 2, None, '___sec36'),
              (u' Type conversion ',
               2,
               u'sec:formulas:typeconversion',
               u'sec:formulas:typeconversion'),
              (u' IPython ',
               2,
               u'sec:formula:ipython',
               u'sec:formula:ipython'),
              (u' Running programs ', 3, None, '___sec39'),
              (u' Quick recovery of previous output ', 3, None, '___sec40'),
              (u' Tab completion ', 3, None, '___sec41'),
              (u' Recovering previous commands ', 3, None, '___sec42'),
              (u' Running Unix/Windows commands ', 3, None, '___sec43'),
              (u' Notebooks ', 3, None, '___sec44'),
              (u' Complex numbers ',
               1,
               u'sec:formula:complex',
               u'sec:formula:complex'),
              (u' Complex arithmetics in Python ', 2, None, '___sec46'),
              (u' Complex functions in Python ', 2, None, '___sec47'),
              (u' Unified treatment of complex and real functions ',
               2,
               u'formulas:unified:complex:real',
               u'formulas:unified:complex:real'),
              (u' Symbolic computing ',
               1,
               u'sec:formula:sympy',
               u'sec:formula:sympy'),
              (u' Basic differentiation and integration ',
               2,
               u'sec:formula:sympy:diffint',
               u'sec:formula:sympy:diffint'),
              (u' Equation solving and Taylor series ', 2, None, '___sec51'),
              (u' Summary ',
               1,
               u'sec:formula:summary',
               u'sec:formula:summary'),
              (u' Chapter topics ', 2, None, '___sec53'),
              (u' Programs must be accurate! ', 3, None, '___sec54'),
              (u' Variables ', 3, None, '___sec55'),
              (u' Comment lines ', 3, None, '___sec56'),
              (u' Object types ', 3, None, '___sec57'),
              (u' Operators ', 3, None, '___sec58'),
              (u' Common mathematical functions ', 3, None, '___sec59'),
              (u' Print ', 3, None, '___sec60'),
              (u' Complex numbers ', 3, None, '___sec61'),
              (u' Terminology ', 3, None, '___sec62'),
              (u' Example: Trajectory of a ball ', 2, None, '___sec63'),
              (u' Problem ', 3, None, '___sec64'),
              (u' Solution ', 3, None, '___sec65'),
              (u' About typesetting conventions in this book ',
               2,
               None,
               '___sec66'),
              (u' Style guide for Python code ', 3, None, '___sec67'),
              (u' Exercises ', 1, u'sec:formula:exer', u'sec:formula:exer'),
              (u' What does it mean to solve an exercise? ',
               3,
               None,
               '___sec69'),
              (u' Exercise 1: Compute 1+1 ',
               2,
               u'sec:formula:ex0',
               u'sec:formula:ex0'),
              (u' Exercise 2: Write a Hello World program ',
               2,
               u'sec:formula:ex5',
               u'sec:formula:ex5'),
              (u' Exercise 3: Derive and compute a formula ',
               2,
               u'sec:formula:ex16',
               u'sec:formula:ex16'),
              (u' Exercise 4: Convert from meters to British length units ',
               2,
               u'sec:formula:ex9',
               u'sec:formula:ex9'),
              (u' Exercise 5: Compute the mass of various substances ',
               2,
               u'sec:formula:exex3',
               u'sec:formula:exex3'),
              (u' Exercise 6: Compute the growth of money in a bank ',
               2,
               u'sec:formula:ex3',
               u'sec:formula:ex3'),
              (u' Exercise 7: Find error(s) in a program ',
               2,
               u'sec:formula:ex12',
               u'sec:formula:ex12'),
              (u' Exercise 8: Type in program text ',
               2,
               u'sec:formula:exex1',
               u'sec:formula:exex1'),
              (u' Exercise 9: Type in programs and debug them ',
               2,
               u'sec:formula:exex2a',
               u'sec:formula:exex2a'),
              (u' Exercise 10: Evaluate a Gaussian function ',
               2,
               u'sec:formula:ex7',
               u'sec:formula:ex7'),
              (u' Remarks ', 3, None, '___sec80'),
              (u' Exercise 11: Compute the air resistance on a football ',
               2,
               u'sec:formula:ex11',
               u'sec:formula:ex11'),
              (u' Exercise 12: How to cook the perfect egg ',
               2,
               u'sec:formula:ex14',
               u'sec:formula:ex14'),
              (u' Exercise 13: Derive the trajectory of a ball ',
               2,
               u'sec:formula:ex13',
               u'sec:formula:ex13'),
              (u' Exercise 14: Find errors in the coding of formulas ',
               2,
               u'sec:formula:ex1',
               u'sec:formula:ex1'),
              (u' Exercise 15: Explain why a program does not work ',
               2,
               u'sec:formula:ex15',
               u'sec:formula:ex15'),
              (u' Exercise 16: Find errors in Python statements ',
               2,
               u'sec:formula:ex2',
               u'sec:formula:ex2'),
              (u' Exercise 17: Find errors in the coding of a formula ',
               2,
               u'sec:formula:ex4',
               u'sec:formula:ex4'),
              (u' References ', 1, None, '___sec88')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="formulas-bootstrap.html">Computing with formulas</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap001.html#sec:formula:1" style="font-size: 80%;">The first programming encounter: a formula</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap002.html#sec:formula:glossary" style="font-size: 80%;">Computer science glossary</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap003.html#sec:formula:c2f" style="font-size: 80%;">Another formula: Celsius-Fahrenheit conversion</a></li>
     <!-- navigation toc: --> <li><a href="#sec:formula:stdmath" style="font-size: 80%;">Evaluating standard mathematical functions</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap005.html#sec:formula:pyshell" style="font-size: 80%;">Interactive computing</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap006.html#sec:formula:complex" style="font-size: 80%;">Complex numbers</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap007.html#sec:formula:sympy" style="font-size: 80%;">Symbolic computing</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap008.html#sec:formula:summary" style="font-size: 80%;">Summary</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap009.html#sec:formula:exer" style="font-size: 80%;">Exercises</a></li>
     <!-- navigation toc: --> <li><a href="._formulas-bootstrap009.html#___sec88" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0004"></a>
<!-- !split -->

<h1 id="sec:formula:stdmath">Evaluating standard mathematical functions<a name="sec:formula:stdmath"></a></h1>

Mathematical formulas frequently involve functions such as sin, cos,
tan, sinh, cosh, exp, log, etc. On a pocket calculator you have
special buttons for such functions. Similarly, in a program you also
have ready-made functionality for evaluating these types of
mathematical functions. One could in principle write one's own program
for evaluating, e.g., the \( \sin(x) \) function, but how to do this in an
efficient way is a non-trivial topic. Experts have worked on this
problem for decades and implemented their best recipes in pieces of
software that we should reuse. This section tells you how to reach
sin, cos, and similar functions in a Python context.

<h2 id="sec:formula:sqrt">Example: Using the square root function<a name="sec:formula:sqrt"></a></h2>

<h3 id="___sec29">Problem <a name="___sec29"></a></h3>

Consider the formula for the height \( y \) of a ball in vertical motion,
with initial upward velocity \( v_0 \):

$$
\begin{equation*} y_c = v_0t - \frac{1}{2}gt^2,\end{equation*}
$$

where \( g \) is the acceleration of gravity and \( t \) is time.
We now ask the question: How long time does it take for the ball
to reach the height \( y_c \)?
The answer is straightforward to derive. When \( y=y_c \) we have

$$
\begin{equation*}
y_c = v_0t - \frac{1}{2}gt^2 \tp
\end{equation*}
$$

We recognize that this equation is a quadratic equation, which we
must solve with respect to \( t \). Rearranging,

$$
\begin{equation*}
\frac{1}{2}gt^2  - v_0t + y_c = 0,\end{equation*}
$$

and using the well-known formula for the two solutions of a quadratic equation,
we find

$$
\begin{equation}
t_1 = \left({v_0 - \sqrt{v_0^2 - 2gy_c}}\right)/g,\quad
t_2 = \left({v_0 + \sqrt{v_0^2 - 2gy_c}}\right)/g\tp
\tag{4}
\end{equation}
$$

There are two solutions because the ball reaches the height \( y_c \) on
its way up \( (t=t_1 \)) and on its way down (\( t=t_2 > t_1 \)).

<h3>The program</h3>

To evaluate the expressions for \( t_1 \) and \( t_2 \) from
<a href="#mjx-eqn-4">(4)</a> in a computer program, we need access to the
square root function.  In Python, the square root function and lots of
other mathematical functions, such as sin, cos, sinh, exp, and log,
are available in a module called <code>math</code>.  We must first import the
module before we can use it, that is, we must write <code>import math</code>.
Thereafter, to take the square root of a variable <code>a</code>, we can write
<code>math.sqrt(a)</code>. This is demonstrated in a program for computing \( t_1 \)
and \( t_2 \):

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">v0 <span style="color: #666666">=</span> <span style="color: #666666">5</span>
g <span style="color: #666666">=</span> <span style="color: #666666">9.81</span>
yc <span style="color: #666666">=</span> <span style="color: #666666">0.2</span>
<span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>
t1 <span style="color: #666666">=</span> (v0 <span style="color: #666666">-</span> math<span style="color: #666666">.</span>sqrt(v0<span style="color: #666666">**2</span> <span style="color: #666666">-</span> <span style="color: #666666">2*</span>g<span style="color: #666666">*</span>yc))<span style="color: #666666">/</span>g
t2 <span style="color: #666666">=</span> (v0 <span style="color: #666666">+</span> math<span style="color: #666666">.</span>sqrt(v0<span style="color: #666666">**2</span> <span style="color: #666666">-</span> <span style="color: #666666">2*</span>g<span style="color: #666666">*</span>yc))<span style="color: #666666">/</span>g
<span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;At t=</span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121"> s and </span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121"> s, the height is </span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121"> m.&#39;</span> <span style="color: #666666">%</span> (t1, t2, yc)
</pre></div>
<p>
The output from this program becomes

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">At t=0.0417064 s and 0.977662 s, the height is 0.2 m.
</pre></div>
</blockquote><p>
You can find the program as the file <a href="http://tinyurl.com/pwyasaa/formulas/ball_yc.py" target="_self"><tt>ball_yc.py</tt></a> in the <code>src/formulas</code> folder.

<h3 id="___sec31">Two ways of importing a module <a name="___sec31"></a></h3>

The standard way to import a module, say <code>math</code>, is to write

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span>
</pre></div>
<p>
and then access individual functions in the module with the module name
as prefix as in

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x <span style="color: #666666">=</span> math<span style="color: #666666">.</span>sqrt(y)
</pre></div>
<p>
People working with mathematical functions often find <code>math.sqrt(y)</code>
less pleasing than just <code>sqrt(y)</code>.  Fortunately, there is an
alternative import syntax that allows us to skip the module name
prefix.  This alternative syntax has the form <code>from module import
function</code>. A specific example is

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> sqrt
</pre></div>
<p>
Now we can work with <code>sqrt</code> directly, without the <code>math.</code> prefix.
More than one function can be imported:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> sqrt, exp, log, sin
</pre></div>
<p>
Sometimes one just writes

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> <span style="color: #666666">*</span>
</pre></div>
<p>
to import all functions in the <code>math</code> module. This includes <code>sin</code>,
<code>cos</code>, <code>tan</code>, <code>asin</code>, <code>acos</code>, <code>atan</code>, <code>sinh</code>, <code>cosh</code>, <code>tanh</code>, <code>exp</code>,
<code>log</code> (base \( e \)), <code>log10</code> (base 10), <code>sqrt</code>, as well as the famous
numbers <code>e</code> and <code>pi</code>.  Importing all functions from a module, using
the asterisk (<code>*</code>) syntax, is convenient, but this may result in a lot
of extra names in the program that are not used.  It is in general
recommended not to import more functions than those that are really
used in the program.  Nevertheless, the convenience of the compact
<code>from math import *</code> syntax occasionally wins over the general
recommendation among practitioners - and in this document.

<p>
With a <code>from math import sqrt</code> statement we can write the
formulas for the roots in a more pleasing way:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">t1 <span style="color: #666666">=</span> (v0 <span style="color: #666666">-</span> sqrt(v0<span style="color: #666666">**2</span> <span style="color: #666666">-</span> <span style="color: #666666">2*</span>g<span style="color: #666666">*</span>yc))<span style="color: #666666">/</span>g
t2 <span style="color: #666666">=</span> (v0 <span style="color: #666666">+</span> sqrt(v0<span style="color: #666666">**2</span> <span style="color: #666666">-</span> <span style="color: #666666">2*</span>g<span style="color: #666666">*</span>yc))<span style="color: #666666">/</span>g
</pre></div>

<h3 id="___sec32">Import with new names <a name="___sec32"></a></h3>

Imported modules and functions can be given new names in the import
statement, e.g.,

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">as</span> <span style="color: #0000FF; font-weight: bold">m</span>
<span style="color: #408080; font-style: italic"># m is now the name of the math module</span>
v <span style="color: #666666">=</span> m<span style="color: #666666">.</span>sin(m<span style="color: #666666">.</span>pi)

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> log <span style="color: #008000; font-weight: bold">as</span> ln
v <span style="color: #666666">=</span> ln(<span style="color: #666666">5</span>)

<span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> sin <span style="color: #008000; font-weight: bold">as</span> s, cos <span style="color: #008000; font-weight: bold">as</span> c, log <span style="color: #008000; font-weight: bold">as</span> ln
v <span style="color: #666666">=</span> s(x)<span style="color: #666666">*</span>c(x) <span style="color: #666666">+</span> ln(x)
</pre></div>
<p>
In Python, everything is an object, and variables refer to objects, so
new variables may refer to modules and functions as well as numbers and
strings. The examples above on new names can also be
coded by introducing new variables explicitly:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">m <span style="color: #666666">=</span> math
ln <span style="color: #666666">=</span> m<span style="color: #666666">.</span>log
s <span style="color: #666666">=</span> m<span style="color: #666666">.</span>sin
c <span style="color: #666666">=</span> m<span style="color: #666666">.</span>cos
</pre></div>

<h2 id="___sec33">Example: Computing with \( \sinh x \) <a name="___sec33"></a></h2>

Our next examples involve calling some more mathematical functions
from the <code>math</code> module. We look at the definition of the \( \sinh (x) \)
function:

$$
\begin{equation}
\sinh (x) = \frac{1}{2}\left(e^{x} - e^{-x}\right)\tp
\tag{5}
\end{equation}
$$

We can evaluate \( \sinh(x) \) in three ways: i) by calling <code>math.sinh</code>,
ii) by computing the right-hand side of <a href="#mjx-eqn-5">(5)</a>,
using <code>math.exp</code>, or iii) by computing the right-hand side of
<a href="#mjx-eqn-5">(5)</a> with the aid of the power expressions
<code>math.e**x</code> and <code>math.e**(-x)</code>.  A program doing these three
alternative calculations is found in the file <a href="http://tinyurl.com/pwyasaa/formulas/3sinh.py" target="_self"><tt>3sinh.py</tt></a>.  The core of the program looks like
this:

<p>

<!-- code=python (!bc pypro) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> sinh, exp, e, pi
x <span style="color: #666666">=</span> <span style="color: #666666">2*</span>pi
r1 <span style="color: #666666">=</span> sinh(x)
r2 <span style="color: #666666">=</span> <span style="color: #666666">0.5*</span>(exp(x) <span style="color: #666666">-</span> exp(<span style="color: #666666">-</span>x))
r3 <span style="color: #666666">=</span> <span style="color: #666666">0.5*</span>(e<span style="color: #666666">**</span>x <span style="color: #666666">-</span> e<span style="color: #666666">**</span>(<span style="color: #666666">-</span>x))
<span style="color: #008000; font-weight: bold">print</span> r1, r2, r3
</pre></div>
<p>
The output from the program
shows that all three computations give identical results:

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">267.744894041 267.744894041 267.744894041
</pre></div>
</blockquote><h2 id="sec:formula:roundoff">A first glimpse of round-off errors<a name="sec:formula:roundoff"></a></h2>

The previous example computes a function in three different yet
mathematically equivalent ways, and the output from the <code>print</code>
statement shows that the three resulting numbers are equal.
Nevertheless, this is not the whole story. Let us try to print out
<code>r1</code>, <code>r2</code>, <code>r3</code> with 16 decimals:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%.16f</span><span style="color: #BA2121"> </span><span style="color: #BB6688; font-weight: bold">%.16f</span><span style="color: #BA2121"> </span><span style="color: #BB6688; font-weight: bold">%.16f</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (r1,r2,r3)
</pre></div>
<p>
This statement leads to the output

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">267.7448940410164369 267.7448940410164369 267.7448940410163232
</pre></div>
</blockquote><p>
Now <code>r1</code> and <code>r2</code> are equal, but <code>r3</code> is different!
Why is this so?

<p>
Our program computes with real numbers, and real numbers need in
general an infinite number of decimals to be represented exactly.  The
computer truncates the sequence of decimals because the storage is
finite. In fact, it is quite standard to keep only 16 digits in a real
number on a computer. Exactly how this truncation is done is not
explained in this document, but you read more on <a href="http://en.wikipedia.org/wiki/Floating_point_number" target="_self">Wikipedia</a>.  For now the
purpose is to notify the reader that real numbers on a computer often
have a small error.  Only a few real numbers can be represented
exactly with 16 digits, the rest of the real numbers are only
approximations.

<p>
For this reason, most arithmetic operations involve inaccurate real
numbers, resulting in inaccurate calculations. Think of the following
two calculations: \( 1/49\cdot 49 \) and \( 1/51\cdot 51 \). Both expressions
are identical to 1, but when we perform the calculations in Python,

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%.16f</span><span style="color: #BA2121"> </span><span style="color: #BB6688; font-weight: bold">%.16f</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> (<span style="color: #666666">1/49.0*49</span>, <span style="color: #666666">1/51.0*51</span>)
</pre></div>
<p>
the result becomes

<p>

<!-- code=text (!bc ccq) typeset with pygments style "default" -->
<blockquote>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">0.9999999999999999 1.0000000000000000
</pre></div>
</blockquote><p>
The reason why we do not get exactly 1.0 as answer in the first case
is because 1/49 is not correctly represented in the computer.  Also
1/51 has an inexact representation, but the error does not propagate
to the final answer.

<p>
To summarize, errors in floating-point numbers may propagate through
mathematical calculations and result in answers that are only
approximations to the exact underlying mathematical values. The errors
in the answers are commonly known as <em>round-off errors</em>.  As soon as
you use Python interactively as explained in the next section, you
will encounter round-off errors quite often.

<p>
Python has a special module <code>decimal</code> which allows real numbers to be
represented with adjustable accuracy so that round-off errors can be
made as small as desired (an example appears the document
<a href="http://tcse6.on.net/funcif" target="_self">Functions and branching</a>
<a href="._formulas-bootstrap009.html#Langtangen_TCSE6_funcif">[8]</a>).  However, we will hardly use this
module because approximations implied by many mathematical methods
applied throughout this document normally lead to (much) larger errors
than those caused by round-off.

<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._formulas-bootstrap003.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._formulas-bootstrap005.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

