<!--
Automatically generated HTML file from DocOnce source
(https://github.com/hplgit/doconce/)
-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Introduction to classes in Python">
<meta name="keywords" content="constructor (class),UML class diagram,instance (class),user-defined datatype (class),method class),attribute (class),namespace,test function,nose tests,pytest tests,special methods (class),callable objects,test function,closure,Newton's method,wrapper code,integration numerical,symbolic computing,integration symbolic,mutable objects,immutable objects,protected attributes (class),test function,information hiding,private attributes (class),API,application programming interface,protected attributes (class),check an object's type,static typing,weak typing,strong typing,dynamic typing,duck typing,static class attributes,static class variables,static class methods,interval arithmetic">

<title>Introduction to classes in Python</title>

<!-- Bootstrap style: bootstrap_bluegray -->
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://raw.github.com/hplgit/doconce/master/bundled/html_styles/style_bootstrap/css/bootstrap_bluegray.css" rel="stylesheet">
<!-- not necessary
<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
-->

<style type="text/css">
/* Let inline verbatim have the same color as the surroundings */
code { color: inherit; background-color: transparent; }
</style>


</head>

<!-- tocinfo
{'highest level': 1,
 'sections': [(' Simple function classes ',
               1,
               'sec:class:functors',
               'sec:class:functors'),
              (' Challenge: functions with parameters ',
               2,
               'sec:class:func1',
               'sec:class:func1'),
              (' Problem ', 3, None, '___sec2'),
              (' A bad solution: global variables ', 3, None, '___sec3'),
              (' Representing a function as a class ',
               2,
               'sec:class:func2',
               'sec:class:func2'),
              (' Implementation ', 3, None, '___sec5'),
              (' Usage and dissection ', 3, None, '___sec6'),
              (' The self  variable ', 3, None, '___sec7'),
              (' Extension of the class ', 3, None, '___sec8'),
              (' Remark ', 3, None, '___sec9'),
              (' Using methods as ordinary functions ', 3, None, '___sec10'),
              (' Doc strings ', 3, None, '___sec11'),
              (' Another function class example ',
               2,
               'sec:class:func3',
               'sec:class:func3'),
              (' Remark ', 3, None, '___sec13'),
              (' Alternative function class implementations ',
               2,
               'sec:class:func2b',
               'sec:class:func2b'),
              (' Making classes without the class construct ',
               2,
               'sec:class:whatis',
               'sec:class:whatis'),
              (' First remark ', 3, None, '___sec16'),
              (' Second remark ', 3, None, '___sec17'),
              (' More examples on classes ',
               1,
               'sec:class:addex',
               'sec:class:addex'),
              (' Bank accounts ',
               2,
               'sec:class:account',
               'sec:class:account'),
              (' Phone book ',
               2,
               'sec:class:phonebook',
               'sec:class:phonebook'),
              (' A circle ', 2, 'sec:class:circle', 'sec:class:circle'),
              (' Verification ', 3, None, '___sec22'),
              (' Remark ', 3, None, '___sec23'),
              (' Special methods ',
               1,
               'sec:class:specialmethods',
               'sec:class:specialmethods'),
              (' The call special method ',
               2,
               'sec:class:call',
               'sec:class:call'),
              (' Example: Automagic differentiation ',
               2,
               'sec:class:autodF',
               'sec:class:autodF'),
              (' Problem ', 3, None, '___sec27'),
              (' Solution ', 3, None, '___sec28'),
              (' Verification ', 3, None, '___sec29'),
              (" Application: Newton's method ", 3, None, '___sec30'),
              (' Example: Automagic integration ',
               2,
               'sec:class:autoint',
               'sec:class:autoint'),
              (' A simple implementation ', 3, None, '___sec32'),
              (' Verification via symbolic computing ', 3, None, '___sec33'),
              (' Remark ', 3, None, '___sec34'),
              (' Turning an instance into a string ',
               2,
               'sec:class:str',
               'sec:class:str'),
              (' Example: Phone book with special methods ',
               2,
               'sec:class:phonebook2',
               'sec:class:phonebook2'),
              (' Remark ', 3, None, '___sec37'),
              (' Adding objects ', 2, 'sec:class:add', 'sec:class:add'),
              (' Example: Class for polynomials ',
               2,
               'sec:class:Polynomial',
               'sec:class:Polynomial'),
              (' Implementation ', 3, None, '___sec40'),
              (' Usage ', 3, None, '___sec41'),
              (' Pretty print of polynomials ', 3, None, '___sec42'),
              (' Verifying the implementation ', 3, None, '___sec43'),
              (' Arithmetic operations and other special methods ',
               2,
               'sec:class:arithmetics',
               'sec:class:arithmetics'),
              (' Special methods for string conversion ',
               2,
               'sec:class:repr',
               'sec:class:repr'),
              (' Recreating objects from strings ', 3, None, '___sec46'),
              (' Example: Class for vectors in the plane ',
               1,
               'sec:class:Vec2D',
               'sec:class:Vec2D'),
              (' Some mathematical operations on vectors ',
               2,
               None,
               '___sec48'),
              (' Implementation ', 2, None, '___sec49'),
              (' Usage ', 2, None, '___sec50'),
              (' Comment ', 3, None, '___sec51'),
              (' Example: Class for complex numbers ', 1, None, '___sec52'),
              (' Implementation ',
               2,
               'sec:class:Complex',
               'sec:class:Complex'),
              (' Illegal operations ',
               2,
               'sec:class:illegalop',
               'sec:class:illegalop'),
              (' Mixing complex and real numbers ',
               2,
               'sec:class:complex:mixed',
               'sec:class:complex:mixed'),
              (' Dynamic, static, strong, weak, and duck typing ',
               2,
               None,
               '___sec56'),
              (" Special methods for ``right'' operands ",
               2,
               'sec:class:complex:rightop',
               'sec:class:complex:rightop'),
              (' Remark ', 3, None, '___sec58'),
              (' Inspecting instances ',
               2,
               'sec:class:inspect',
               'sec:class:inspect'),
              (' Static methods and attributes ',
               1,
               'sec:class:static',
               'sec:class:static'),
              (' Summary ', 1, None, '___sec61'),
              (' Chapter topics ',
               2,
               'sec:class:summary',
               'sec:class:summary'),
              (' Classes ', 3, None, '___sec63'),
              (' Special methods ', 3, None, '___sec64'),
              (' Terminology ', 3, None, '___sec65'),
              (' Example: interval arithmetic ', 2, None, '___sec66'),
              (' Problem ', 3, None, '___sec67'),
              (' Solution ', 3, None, '___sec68'),
              (' Exercises ', 1, None, '___sec69'),
              (' Exercise 1: Make a function class ',
               2,
               'sec:class:ex2',
               'sec:class:ex2'),
              (' Exercise 2: Add an attribute to a class ',
               2,
               'sec:class:ex25q',
               'sec:class:ex25q'),
              (' Exercise 3: Add functionality to a class ',
               2,
               'sec:class:ex25q2',
               'sec:class:ex25q2'),
              (' Exercise 4: Make classes for a rectangle and a triangle ',
               2,
               'sec:class:ex23',
               'sec:class:ex23'),
              (' Exercise 5: Make a class for quadratic functions ',
               2,
               'sec:class:ex11',
               'sec:class:ex11'),
              (' Exercise 6: Make a class for straight lines ',
               2,
               'sec:class:ex25',
               'sec:class:ex25'),
              (' Exercise 7: Flexible handling of function arguments ',
               2,
               'sec:class:ex25b',
               'sec:class:ex25b'),
              (' Exercise 8: Wrap functions in a class ',
               2,
               'sec:class:ex27d',
               'sec:class:ex27d'),
              (' Exercise 9: Flexible handling of function arguments ',
               2,
               'sec:class:ex27e',
               'sec:class:ex27e'),
              (' Exercise 10: Deduce a class implementation ',
               2,
               'sec:class:ex1',
               'sec:class:ex1'),
              (' Exercise 11: Implement special methods in a class ',
               2,
               'sec:class:ex2b2',
               'sec:class:ex2b2'),
              (' Exercise 12: Make a class for summation of series ',
               2,
               'sec:class:ex2b',
               'sec:class:ex2b'),
              (' Exercise 13: Apply a numerical differentiation class ',
               2,
               'sec:class:ex10',
               'sec:class:ex10'),
              (' Exercise 14: Apply symbolic differentiation ',
               2,
               'sec:class:exer:sympy:diff',
               'sec:class:exer:sympy:diff'),
              (' Exercise 15: Implement in-place `+=` and `-=` operators ',
               2,
               'sec:class:ex25qb',
               'sec:class:ex25qb'),
              (' Exercise 16: Implement a class for numerical differentiation ',
               2,
               'sec:class:ex21',
               'sec:class:ex21'),
              (' Exercise 17: Examine a program ',
               2,
               'sec:class:ex21b',
               'sec:class:ex21b'),
              (' Exercise 18: Modify a class for numerical differentiation ',
               2,
               'sec:class:ex23s',
               'sec:class:ex23s'),
              (' Exercise 19: Make a class for the Heaviside function ',
               2,
               'sec:basic:exHclass',
               'sec:basic:exHclass'),
              (' Exercise 20: Make a class for the indicator function ',
               2,
               'sec:basic:exIndclass',
               'sec:basic:exIndclass'),
              (' Exercise 21: Make a class for piecewise constant functions ',
               2,
               'sec:basic:ex:piecewisefunc',
               'sec:basic:ex:piecewisefunc'),
              (' Exercise 22: Speed up repeated integral calculations ',
               2,
               'sec:class:ex13c',
               'sec:class:ex13c'),
              (' Exercise 23: Apply a class for polynomials ',
               2,
               'sec:class:ex5',
               'sec:class:ex5'),
              (' Exercise 24: Find a bug in a class for polynomials ',
               2,
               'sec:class:ex4',
               'sec:class:ex4'),
              (' Exercise 25: Implement subtraction of polynomials ',
               2,
               'sec:class:ex6a',
               'sec:class:ex6a'),
              (' Exercise 26: Test the functionality of pretty print of polynomials ',
               2,
               'sec:class:exer:str',
               'sec:class:exer:str'),
              (' Exercise 27: Vectorize a class for polynomials ',
               2,
               'sec:class:ex7v',
               'sec:class:ex7v'),
              (' Remarks ', 3, None, '___sec97'),
              (' Exercise 28: Use a dict to hold polynomial coefficients ',
               2,
               'sec:class:ex8',
               'sec:class:ex8'),
              (' Exercise 29: Extend class Vec2D to work with lists/tuples ',
               2,
               'sec:class:ex16',
               'sec:class:ex16'),
              (' Exercise 30: Extend class Vec2D to 3D vectors ',
               2,
               'sec:class:ex17b',
               'sec:class:ex17b'),
              (' Exercise 31: Use NumPy arrays in class Vec2D ',
               2,
               'sec:class:ex17',
               'sec:class:ex17'),
              (' Exercise 32: Make classes for students and courses ',
               2,
               'sec:class:ex15',
               'sec:class:ex15'),
              (' Exercise 33: Find local and global extrema of a function ',
               2,
               'sec:plot:ex28',
               'sec:plot:ex28'),
              (' Exercise 34: Find the optimal production for a company ',
               2,
               'sec:class:ex18a',
               'sec:class:ex18a'),
              (' References ', 1, None, '___sec105')]}
end of tocinfo -->

<body>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<!-- newcommands_keep.tex -->
$$
\newcommand{\tp}{\thinspace .}
$$




    
<!-- Bootstrap navigation bar -->
<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a class="navbar-brand" href="class-bootstrap.html">Introduction to classes in Python</a>
  </div>
  <div class="navbar-collapse collapse navbar-responsive-collapse">
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contents <b class="caret"></b></a>
        <ul class="dropdown-menu">
     <!-- navigation toc: --> <li><a href="._class-bootstrap001.html#sec:class:functors" style="font-size: 80%;">Simple function classes</a></li>
     <!-- navigation toc: --> <li><a href="#sec:class:addex" style="font-size: 80%;">More examples on classes</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap003.html#sec:class:specialmethods" style="font-size: 80%;">Special methods</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap004.html#sec:class:Vec2D" style="font-size: 80%;">Example: Class for vectors in the plane</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap005.html#___sec52" style="font-size: 80%;">Example: Class for complex numbers</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap006.html#sec:class:static" style="font-size: 80%;">Static methods and attributes</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap007.html#___sec61" style="font-size: 80%;">Summary</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap008.html#___sec69" style="font-size: 80%;">Exercises</a></li>
     <!-- navigation toc: --> <li><a href="._class-bootstrap008.html#___sec105" style="font-size: 80%;">References</a></li>

        </ul>
      </li>
    </ul>
  </div>
</div>
</div> <!-- end of navigation bar -->

<div class="container">

<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p> <!-- add vertical space -->

<a name="part0002"></a>
<!-- !split -->

<h1 id="sec:class:addex">More examples on classes<a name="sec:class:addex"></a></h1>

<p>
The use of classes to solve problems from
mathematical and physical sciences may not be
so obvious. On the other hand, in
many administrative programs for managing
interactions between objects in the real world the objects
themselves are
natural candidates for being modeled by classes.
Below we give some examples on what classes can be used to model.

<h2 id="sec:class:account">Bank accounts<a name="sec:class:account"></a></h2>

<p>
The concept of a bank account in a program is a good candidate for a
class.  The account has some data, typically the name of the account
holder, the account number, and the current balance.  Three things we
can do with an account is withdraw money, put money into the account,
and print out the data of the account.  These actions are modeled by
methods.  With a class we can pack the data and actions together into
a new data type so that one account corresponds to one variable in a
program.

<p>
Class <code>Account</code> can be implemented as follows:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Account</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, name, account_number, initial_amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>name <span style="color: #666666">=</span> name
        <span style="color: #008000">self</span><span style="color: #666666">.</span>no <span style="color: #666666">=</span> account_number
        <span style="color: #008000">self</span><span style="color: #666666">.</span>balance <span style="color: #666666">=</span> initial_amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">deposit</span>(<span style="color: #008000">self</span>, amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>balance <span style="color: #666666">+=</span> amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">withdraw</span>(<span style="color: #008000">self</span>, amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>balance <span style="color: #666666">-=</span> amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">dump</span>(<span style="color: #008000">self</span>):
        s <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">, </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">, balance: </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> \ 
            (<span style="color: #008000">self</span><span style="color: #666666">.</span>name, <span style="color: #008000">self</span><span style="color: #666666">.</span>no, <span style="color: #008000">self</span><span style="color: #666666">.</span>balance)
        <span style="color: #008000; font-weight: bold">print</span> s
</pre></div>
<p>
Here is a simple test of how class <code>Account</code> can be used:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">classes</span> <span style="color: #008000; font-weight: bold">import</span> Account
<span style="color: #666666">&gt;&gt;&gt;</span> a1 <span style="color: #666666">=</span> Account(<span style="color: #BA2121">&#39;John Olsson&#39;</span>, <span style="color: #BA2121">&#39;19371554951&#39;</span>, <span style="color: #666666">20000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a2 <span style="color: #666666">=</span> Account(<span style="color: #BA2121">&#39;Liz Olsson&#39;</span>,  <span style="color: #BA2121">&#39;19371564761&#39;</span>, <span style="color: #666666">20000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>deposit(<span style="color: #666666">1000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>withdraw(<span style="color: #666666">4000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a2<span style="color: #666666">.</span>withdraw(<span style="color: #666666">10500</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>withdraw(<span style="color: #666666">3500</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&quot;a1&#39;s balance:&quot;</span>, a1<span style="color: #666666">.</span>balance
a1<span style="color: #BA2121">&#39;s balance: 13500</span>
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>dump()
John Olsson, <span style="color: #666666">19371554951</span>, balance: <span style="color: #666666">13500</span>
<span style="color: #666666">&gt;&gt;&gt;</span> a2<span style="color: #666666">.</span>dump()
Liz Olsson, <span style="color: #666666">19371564761</span>, balance: <span style="color: #666666">9500</span>
</pre></div>
<p>
The author of this class does not want users of the class to operate
on the attributes directly and thereby change the name, the account
number, or the balance. The intention is that users of the class
should only call the constructor, the <code>deposit</code>, <code>withdraw</code>, and
<code>dump</code> methods, and (if desired) inspect the <code>balance</code> attribute, but
never change it. Other languages with class support usually have
special keywords that can restrict access to class attributes and
methods, but Python does not. Either the author of a Python class has
to rely on correct usage, or a special convention can be used: any
name starting with an underscore represents an attribute that should
never be touched or a method that should never be called.  One refers
to names starting with an underscore as <em>protected</em> names. These can
be freely used inside methods in the class, but not outside.

<p>
In class <code>Account</code>, it is natural to protect access to the <code>name</code>,
<code>no</code>, and <code>balance</code> attributes by prefixing these names by an
underscore. For <em>reading</em> only of the <code>balance</code> attribute, we provide
a new method <code>get_balance</code>. The user of the class should now only call
the methods in the class and not access any attributes.

<p>
The new "protected" version of class <code>Account</code>, called
<code>AccountP</code>, reads

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">AccountP</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, name, account_number, initial_amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_name <span style="color: #666666">=</span> name
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_no <span style="color: #666666">=</span> account_number
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_balance <span style="color: #666666">=</span> initial_amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">deposit</span>(<span style="color: #008000">self</span>, amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_balance <span style="color: #666666">+=</span> amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">withdraw</span>(<span style="color: #008000">self</span>, amount):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>_balance <span style="color: #666666">-=</span> amount

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">get_balance</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>_balance

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">dump</span>(<span style="color: #008000">self</span>):
        s <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">, </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">, balance: </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> \ 
            (<span style="color: #008000">self</span><span style="color: #666666">.</span>_name, <span style="color: #008000">self</span><span style="color: #666666">.</span>_no, <span style="color: #008000">self</span><span style="color: #666666">.</span>_balance)
        <span style="color: #008000; font-weight: bold">print</span> s
</pre></div>
<p>
We can technically access the attributes, but we then break the
convention that names starting with an underscore should never
be touched outside the class. Here is class <code>AccountP</code> in action:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> a1 <span style="color: #666666">=</span> AccountP(<span style="color: #BA2121">&#39;John Olsson&#39;</span>, <span style="color: #BA2121">&#39;19371554951&#39;</span>, <span style="color: #666666">20000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>deposit(<span style="color: #666666">1000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>withdraw(<span style="color: #666666">4000</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>withdraw(<span style="color: #666666">3500</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>dump()
John Olsson, <span style="color: #666666">19371554951</span>, balance: <span style="color: #666666">13500</span>
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> a1<span style="color: #666666">.</span>_balance       <span style="color: #408080; font-style: italic"># it works, but a convention is broken</span>
<span style="color: #666666">13500</span>
<span style="color: #008000; font-weight: bold">print</span> a1<span style="color: #666666">.</span>get_balance()      <span style="color: #408080; font-style: italic"># correct way of viewing the balance</span>
<span style="color: #666666">13500</span>
<span style="color: #666666">&gt;&gt;&gt;</span> a1<span style="color: #666666">.</span>_no <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;19371554955&#39;</span>  <span style="color: #408080; font-style: italic"># this is a &quot;serious crime&quot;</span>
</pre></div>
<p>
Python has a special construct, called <em>properties</em>, that can
be used to protect attributes from being changed. This is very useful,
but the author considers properties a bit too complicated for this
introductory book.

<p>
<!-- We remark that users of Python classes tend to access attributes (without -->
<!-- a leading underscore) directly, while in other languages, such as -->
<!-- C++, Java, and C#, developers are strongly encouraged to read an -->
<!-- attribute <code>X</code> by a <code>get_X()</code> method and to change the -->
<!-- attribute by a <code>set_X(X)</code> method. -->

<h2 id="sec:class:phonebook">Phone book<a name="sec:class:phonebook"></a></h2>

<p>
You are probably familiar with the phone book on your mobile phone.
The phone book contains a list of persons. For each person you can
record the name, telephone numbers, email address, and perhaps other
relevant data.  A natural way of representing such personal data in a
program is to create a class, say class <code>Person</code>. The attributes of
the class holds data like the name, mobile phone number, office phone
number, private phone number, and email address.  The constructor may
initialize some of the data about a person.  Additional data can be
specified later by calling methods in the class.  One method can print
the data. Other methods can register additional telephone numbers and
an email address. In addition we initialize some of the attributes in
a constructor method. The attributes that are not initialized when
constructing a <code>Person</code> instance can be added later by calling
appropriate methods. For example, adding an office number is done by
calling <code>add_office_number</code>.

<p>
Class <code>Person</code> may look as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Person</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, name,
                 mobile_phone<span style="color: #666666">=</span><span style="color: #008000">None</span>, office_phone<span style="color: #666666">=</span><span style="color: #008000">None</span>,
                 private_phone<span style="color: #666666">=</span><span style="color: #008000">None</span>, email<span style="color: #666666">=</span><span style="color: #008000">None</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>name <span style="color: #666666">=</span> name
        <span style="color: #008000">self</span><span style="color: #666666">.</span>mobile <span style="color: #666666">=</span> mobile_phone
        <span style="color: #008000">self</span><span style="color: #666666">.</span>office <span style="color: #666666">=</span> office_phone
        <span style="color: #008000">self</span><span style="color: #666666">.</span>private <span style="color: #666666">=</span> private_phone
        <span style="color: #008000">self</span><span style="color: #666666">.</span>email <span style="color: #666666">=</span> email

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_mobile_phone</span>(<span style="color: #008000">self</span>, number):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>mobile <span style="color: #666666">=</span> number

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_office_phone</span>(<span style="color: #008000">self</span>, number):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>office <span style="color: #666666">=</span> number

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_private_phone</span>(<span style="color: #008000">self</span>, number):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>private <span style="color: #666666">=</span> number

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">add_email</span>(<span style="color: #008000">self</span>, address):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>email <span style="color: #666666">=</span> address
</pre></div>
<p>
Note the use of <code>None</code> as default value for various attributes: the
object <code>None</code> is commonly used to indicate that a variable or
attribute is defined, but yet not with a sensible value.

<p>
A quick demo session of class <code>Person</code> may go as follows:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> p1 <span style="color: #666666">=</span> Person(<span style="color: #BA2121">&#39;Hans Hanson&#39;</span>,
<span style="color: #666666">...</span>             office_phone<span style="color: #666666">=</span><span style="color: #BA2121">&#39;767828283&#39;</span>, email<span style="color: #666666">=</span><span style="color: #BA2121">&#39;h@hanshanson.com&#39;</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> p2 <span style="color: #666666">=</span> Person(<span style="color: #BA2121">&#39;Ole Olsen&#39;</span>, office_phone<span style="color: #666666">=</span><span style="color: #BA2121">&#39;767828292&#39;</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> p2<span style="color: #666666">.</span>add_email(<span style="color: #BA2121">&#39;olsen@somemail.net&#39;</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> phone_book <span style="color: #666666">=</span> [p1, p2]
</pre></div>
<p>
It can be handy to add a method for printing the contents of
a <code>Person</code> instance in a nice fashion:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Person</span>:
    <span style="color: #666666">...</span>
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">dump</span>(<span style="color: #008000">self</span>):
        s <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>name <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span>
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>mobile <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
            s <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;mobile phone:   </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>mobile
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>office <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
            s <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;office phone:   </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>office
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>private <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
            s <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;private phone:  </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>private
        <span style="color: #008000; font-weight: bold">if</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>email <span style="color: #AA22FF; font-weight: bold">is</span> <span style="color: #AA22FF; font-weight: bold">not</span> <span style="color: #008000">None</span>:
            s <span style="color: #666666">+=</span> <span style="color: #BA2121">&#39;email address:  </span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BB6622; font-weight: bold">\n</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>email
        <span style="color: #008000; font-weight: bold">print</span> s
</pre></div>
<p>
With this method we can easily print the phone book:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">for</span> person <span style="color: #AA22FF; font-weight: bold">in</span> phone_book:
<span style="color: #666666">...</span>     person<span style="color: #666666">.</span>dump()
<span style="color: #666666">...</span>
Hans Hanson
office phone:   <span style="color: #666666">767828283</span>
email address:  h<span style="color: #AA22FF">@hanshanson.com</span>

Ole Olsen
office phone:   <span style="color: #666666">767828292</span>
email address:  olsen<span style="color: #AA22FF">@somemail.net</span>
</pre></div>
<p>
A phone book can be a list of <code>Person</code> instances, as indicated in the
examples above. However, if we quickly want to look up the phone
numbers or email address for a given name, it would be more convenient
to store the <code>Person</code> instances in a dictionary with the name
as key:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> phone_book <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;Hanson&#39;</span>: p1, <span style="color: #BA2121">&#39;Olsen&#39;</span>: p2}
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">for</span> person <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">sorted</span>(phone_book):  <span style="color: #408080; font-style: italic"># alphabetic order</span>
<span style="color: #666666">...</span>     phone_book[person]<span style="color: #666666">.</span>dump()
</pre></div>
<p>
The current example of <code>Person</code> objects is extended in
the section <a href="._class-bootstrap003.html#sec:class:phonebook2">Example: Phone book with special methods</a>.

<h2 id="sec:class:circle">A circle<a name="sec:class:circle"></a></h2>

<p>
Geometric figures, such as a circle, are other candidates for classes
in a program. A circle is uniquely defined by its center point
\( (x_0,y_0) \) and its radius \( R \). We can collect these three numbers
as attributes in a class. The values of \( x_0 \), \( y_0 \), and \( R \) are
naturally initialized in the constructor. Other methods can be
<code>area</code> and <code>circumference</code> for calculating the area
\( \pi R^2 \) and the circumference \( 2\pi R \):

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Circle</span>:
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>, x0, y0, R):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>x0, <span style="color: #008000">self</span><span style="color: #666666">.</span>y0, <span style="color: #008000">self</span><span style="color: #666666">.</span>R <span style="color: #666666">=</span> x0, y0, R

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">area</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> pi<span style="color: #666666">*</span><span style="color: #008000">self</span><span style="color: #666666">.</span>R<span style="color: #666666">**2</span>

    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circumference</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">2*</span>pi<span style="color: #666666">*</span><span style="color: #008000">self</span><span style="color: #666666">.</span>R
</pre></div>
<p>
An example of using class <code>Circle</code> goes as follows:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #666666">&gt;&gt;&gt;</span> c <span style="color: #666666">=</span> Circle(<span style="color: #666666">2</span>, <span style="color: #666666">-1</span>, <span style="color: #666666">5</span>)
<span style="color: #666666">&gt;&gt;&gt;</span> <span style="color: #008000; font-weight: bold">print</span> <span style="color: #BA2121">&#39;A circle with radius </span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121"> at (</span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">, </span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">) has area </span><span style="color: #BB6688; font-weight: bold">%g</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> \ 
<span style="color: #666666">...</span>       (c<span style="color: #666666">.</span>R, c<span style="color: #666666">.</span>x0, c<span style="color: #666666">.</span>y0, c<span style="color: #666666">.</span>area())
A circle <span style="color: #008000; font-weight: bold">with</span> radius <span style="color: #666666">5</span> at (<span style="color: #666666">2</span>, <span style="color: #666666">-1</span>) has area <span style="color: #666666">78.5398</span>
</pre></div>
<p>
The ideas of class <code>Circle</code> can be applied to other geometric
objects as well: rectangles, triangles, ellipses, boxes, spheres, etc.
<a href="._class-bootstrap008.html#sec:class:ex23">Exercise 4: Make classes for a rectangle and a triangle</a> tests if you are able to adapt class
<code>Circle</code> to a rectangle and a triangle.

<h3 id="___sec22">Verification <a name="___sec22"></a></h3>

<p>
We should include a test function for checking that the implementation
of class <code>Circle</code> is correct:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">test_Circle</span>():
    R <span style="color: #666666">=</span> <span style="color: #666666">2.5</span>
    c <span style="color: #666666">=</span> Circle(<span style="color: #666666">7.4</span>, <span style="color: #666666">-8.1</span>, R)

    <span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">math</span> <span style="color: #008000; font-weight: bold">import</span> pi
    exact_area <span style="color: #666666">=</span> pi<span style="color: #666666">*</span>R<span style="color: #666666">**2</span>
    computed_area <span style="color: #666666">=</span> c<span style="color: #666666">.</span>area()
    diff <span style="color: #666666">=</span> <span style="color: #008000">abs</span>(exact_area <span style="color: #666666">-</span> computed_area)
    tol <span style="color: #666666">=</span> <span style="color: #666666">1E-14</span>
    <span style="color: #008000; font-weight: bold">assert</span> diff <span style="color: #666666">&lt;</span> tol, <span style="color: #BA2121">&#39;bug in Circle.area, diff=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> diff

    exact_circumference <span style="color: #666666">=</span> <span style="color: #666666">2*</span>pi<span style="color: #666666">*</span>R
    computed_circumference <span style="color: #666666">=</span> c<span style="color: #666666">.</span>circumference()
    diff <span style="color: #666666">=</span> <span style="color: #008000">abs</span>(exact_circumference <span style="color: #666666">-</span> computed_circumference)
    <span style="color: #008000; font-weight: bold">assert</span> diff <span style="color: #666666">&lt;</span> tol, <span style="color: #BA2121">&#39;bug in Circle.circumference, diff=</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&#39;</span> <span style="color: #666666">%</span> diff
</pre></div>
<p>
The <code>test_Circle</code> function is written in a way that it can be used
in a pytest or nose testing
framework (see the section ref{sec:nose}, or the brief examples
in the sections ref{bioinf:count:verify}, ref{sec:funcif:summary:ex}, and
ref{sec:input:modules:testfunc}).
The necessary conventions
are that the function name starts
with <code>test_</code>, the function takes no arguments, and all tests
are of the form <code>assert success</code> or <code>assert success, msg</code> where
<code>success</code> is a boolean condition for the test and <code>msg</code> is an
optional message to be written if the test fails (<code>success</code> is
<code>False</code>). It is a good habit to write such test functions to
verify the implementation of classes.

<h3 id="___sec23">Remark <a name="___sec23"></a></h3>

<p>
There are usually many solutions to a programming problem.
Representing a circle
is no exception. Instead of using a class, we could collect
\( x_0 \), \( y_0 \), and \( R \) in a list and create global functions
<code>area</code> and <code>circumference</code> that take such a list as argument:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">x0, y0, R <span style="color: #666666">=</span> <span style="color: #666666">2</span>, <span style="color: #666666">-1</span>, <span style="color: #666666">5</span>
circle <span style="color: #666666">=</span> [x0, y0, R]

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">area</span>(c):
    R <span style="color: #666666">=</span> c[<span style="color: #666666">2</span>]
    <span style="color: #008000; font-weight: bold">return</span> pi<span style="color: #666666">*</span>R<span style="color: #666666">**2</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circumference</span>(c):
    R <span style="color: #666666">=</span> c[<span style="color: #666666">2</span>]
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">2*</span>pi<span style="color: #666666">*</span>R
</pre></div>
<p>
Alternatively, the circle could be represented by a dictionary with
keys <code>'center'</code> and <code>'radius'</code>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">circle <span style="color: #666666">=</span> {<span style="color: #BA2121">&#39;center&#39;</span>: (<span style="color: #666666">2</span>, <span style="color: #666666">-1</span>), <span style="color: #BA2121">&#39;radius&#39;</span>: <span style="color: #666666">5</span>}

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">area</span>(c):
    R <span style="color: #666666">=</span> c[<span style="color: #BA2121">&#39;radius&#39;</span>]
    <span style="color: #008000; font-weight: bold">return</span> pi<span style="color: #666666">*</span>R<span style="color: #666666">**2</span>

<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">circumference</span>(c):
    R <span style="color: #666666">=</span> c[<span style="color: #BA2121">&#39;radius&#39;</span>]
    <span style="color: #008000; font-weight: bold">return</span> <span style="color: #666666">2*</span>pi<span style="color: #666666">*</span>R
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._class-bootstrap001.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._class-bootstrap003.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->

</div>  <!-- end container -->
<!-- include javascript, jQuery *first* -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

<!-- Bootstrap footer
<footer>
<a href="http://..."><img width="250" align=right src="http://..."></a>
</footer>
-->


</body>
</html>
    

